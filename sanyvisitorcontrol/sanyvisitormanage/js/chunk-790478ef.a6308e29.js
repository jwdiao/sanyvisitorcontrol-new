(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-790478ef"],{"0a49":function(e,t,a){var r=a("9b43"),o=a("626a"),n=a("4bf8"),i=a("9def"),l=a("cd1c");e.exports=function(e,t){var a=1==e,s=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d,m=t||l;return function(t,l,h){for(var p,g,b=n(t),v=o(b),S=r(l,h,3),y=i(v.length),w=0,k=a?m(t,y):s?m(t,0):void 0;y>w;w++)if((f||w in v)&&(p=v[w],g=S(p,w,b),e))if(a)k[w]=g;else if(g)switch(e){case 3:return!0;case 5:return p;case 6:return w;case 2:k.push(p)}else if(u)return!1;return d?-1:c||u?u:k}}},1169:function(e,t,a){var r=a("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"20fd":function(e,t,a){"use strict";var r=a("d9f6"),o=a("aebd");e.exports=function(e,t,a){t in e?r.f(e,t,o(0,a)):e[t]=a}},"549b":function(e,t,a){"use strict";var r=a("d864"),o=a("63b6"),n=a("241e"),i=a("b0dc"),l=a("3702"),s=a("b447"),c=a("20fd"),u=a("7cd6");o(o.S+o.F*!a("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,o,d,f=n(e),m="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,g=void 0!==p,b=0,v=u(f);if(g&&(p=r(p,h>2?arguments[2]:void 0,2)),void 0==v||m==Array&&l(v))for(t=s(f.length),a=new m(t);t>b;b++)c(a,b,g?p(f[b],b):f[b]);else for(d=v.call(f),a=new m;!(o=d.next()).done;b++)c(a,b,g?i(d,p,[o.value,b],!0):o.value);return a.length=b,a}})},7514:function(e,t,a){"use strict";var r=a("5ca1"),o=a("0a49")(5),n="find",i=!0;n in[]&&Array(1)[n](function(){i=!1}),r(r.P+r.F*i,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},"774e":function(e,t,a){e.exports=a("d2d5")},ac6a:function(e,t,a){for(var r=a("cadf"),o=a("0d58"),n=a("2aba"),i=a("7726"),l=a("32e9"),s=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),f=s.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(m),p=0;p<h.length;p++){var g,b=h[p],v=m[b],S=i[b],y=S&&S.prototype;if(y&&(y[u]||l(y,u,f),y[d]||l(y,d,b),s[b]=f,v))for(g in r)y[g]||n(y,g,r[g],!0)}},b34d:function(e,t,a){},cd1c:function(e,t,a){var r=a("e853");e.exports=function(e,t){return new(r(e))(t)}},d2d5:function(e,t,a){a("1654"),a("549b"),e.exports=a("584a").Array.from},e075:function(e,t,a){"use strict";var r=a("b34d"),o=a.n(r);o.a},e853:function(e,t,a){var r=a("d3f4"),o=a("1169"),n=a("2b4c")("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}},f5e7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{overflow:"hidden"}},[a("p",{staticClass:"common-breadcrumb"},[e._v("用户角色")]),a("div",{staticClass:"messageBox"},[a("div",{staticClass:"left"},[a("el-tree",{ref:"treeForm",attrs:{data:e.treeData,"show-checkbox":"","node-key":"id","default-expand-all":""},on:{"check-change":e.handleClick,"node-click":e.nodeClick}})],1),a("div",{staticClass:"right"},[a("el-form",{ref:"userForm",staticClass:"common-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[a("el-form-item",{attrs:{label:"员工姓名",prop:"userName"}},[a("el-input",{attrs:{placeholder:"员工姓名"},model:{value:e.formInline.userName,callback:function(t){e.$set(e.formInline,"userName",t)},expression:"formInline.userName"}})],1),a("el-form-item",{attrs:{label:"员工编号",prop:"userNo"}},[a("el-input",{ref:"userNo",attrs:{placeholder:"工号"},model:{value:e.formInline.userNo,callback:function(t){e.$set(e.formInline,"userNo",t)},expression:"formInline.userNo"}})],1),a("el-form-item",[a("el-button",{staticClass:"btnIsBlue",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),a("div",{staticClass:"common-table"},[e.loadingStatus?a("div",{staticClass:"lazyImg"},[a("span",{staticClass:"lazyText"},[e._v("数据加载中")])]):e._e(),e.noDataStatus?a("div",{staticClass:"lazyImg"},[a("span",{staticClass:"lazyText"},[e._v("暂无数据")])]):e._e(),e.loadingStatus?e._e():a("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.noDataStatus,expression:"!noDataStatus"},{name:"loading",rawName:"v-loading",value:e.loadingSwitch,expression:"loadingSwitch"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-row-class-name":"table-header",height:"600"}},[a("el-table-column",{attrs:{prop:"num",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"userNo",label:"员工工号"}}),a("el-table-column",{attrs:{prop:"userName",label:"员工姓名"}}),a("el-table-column",{attrs:{prop:"roleName",label:"功能角色"}}),a("el-table-column",{attrs:{prop:"address",label:"修改角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.handleAmend(t.$index,t.row)}}},[e._v("修改角色")])]}}])})],1)],1),a("div",{staticClass:"marginTop10 text-right"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"用户角色",visible:e.dialogFormVisible,width:"1000px"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{staticStyle:{display:"flex"},attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"工号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.workno,callback:function(t){e.$set(e.form,"workno",t)},expression:"form.workno"}})],1),a("el-form-item",{attrs:{label:"用户角色","label-width":e.formLabelWidth,disabled:!0}},[a("el-select",{attrs:{placeholder:"请选择角色"},on:{change:e.selectRole},model:{value:e.roleValue,callback:function(t){e.roleValue=t},expression:"roleValue"}},e._l(e.roleOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{staticClass:"btnIsBlue",attrs:{type:"primary"},on:{click:e.confirmRevision}},[e._v("确 定")])],1)],1)],1)])])},o=[],n=(a("96cf"),a("3b8d")),i=(a("7514"),a("774e")),l=a.n(i),s=(a("ac6a"),a("cadf"),a("551c"),a("097d"),a("c1fb")),c={name:"photoInputSearch",data:function(){return{loadingSwitch:!1,treeData:[],defaultProps:{children:"children",label:"label"},formInline:{userName:"",userNo:""},roleOptions:[],dialogFormVisible:!1,formLabelWidth:"120px",roleCode:"",form:{name:"",workno:"",userRole:""},roleValue:"",selectedRoleName:"",editCheckId:"",tableData:[],loadingStatus:!0,noDataStatus:!1,currentPage:1,pageSize:10,pageTotal:0}},mounted:function(){this.roleCode="",this.selectRolue(),this.selectEmployerRole()},watch:{tableData:function(){this.loadingSwitch=!1}},methods:{nodeClick:function(e,t,a){this.checkedId=e.id,this.$refs.treeForm.setCheckedNodes([e]),console.log(t)},handleClick:function(e,t,a){console.log(t),console.log(e),1==t&&(this.roleCode=e.value,this.checkedId=e.id,this.$refs.treeForm.setCheckedNodes([e]))},onSubmit:function(){var e=1;l()(document.querySelectorAll(".el-checkbox__original")).forEach(function(t,a){t.checked&&(e=2)}),1===e&&(this.roleCode=""),this.selectEmployerRole(),this.loadingSwitch=!0},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.selectEmployerRole(),this.loadingSwitch=!0},handleCurrentChange:function(e){this.currentPage=e,this.selectEmployerRole(),this.loadingSwitch=!0},selectRole:function(e){var t={};t=this.roleOptions.find(function(t){return t.value===e}),this.selectedRoleName=t.label},handleAmend:function(e,t){this.form.workno=t.userNo,this.form.name=t.userName,this.roleValue=t.roleName,console.log("row:",t),console.log("this.roleValue:",this.roleValue),this.dialogFormVisible=!0},confirmRevision:function(){var e=this;this.dialogFormVisible=!1,this.updateRole(),setTimeout(function(){e.selectEmployerRole()},1e3)},selectEmployerRole:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].post("/user/SanyBasicShrUser/selectEmployerRoleByUserNoAndUserName",{query:{userName:this.formInline.userName,loginAccount:this.formInline.userNo,roleCode:this.roleCode},pageNum:this.currentPage,pageSize:this.pageSize});case 2:if(t=e.sent,t&&200!==!t.data.code){e.next=5;break}return e.abrupt("return");case 5:if(t.data.data.list.forEach(function(e,t){e.num=(a.currentPage-1)*a.pageSize+t+1}),this.tableData=t.data.data.list,this.pageTotal=t.data.data.total,this.loadingStatus=!1,0!==this.tableData.length){e.next=12;break}return this.noDataStatus=!0,e.abrupt("return");case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),selectRolue:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].post("/user/SanyBasicShrUser/selectRolesNoPage");case 2:t=e.sent,t.data&&200===t.data.code&&(this.treeData=t.data.data.map(function(e){return{label:e.roleName,value:e.roleCode,id:e.id}}),this.roleOptions=t.data.data.map(function(e){return{label:e.roleName,value:e.roleCode}}));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateRole:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].post("/user/SanyBasicShrUser/updateRole",{loginAccount:this.form.workno,roleCode:this.roleValue,roleName:this.selectedRoleName});case 2:t=e.sent,console.log("roleValue:::",this.roleValue),200===t.data.code&&this.$message({type:"success",message:t.data.data});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},u=c,d=(a("e075"),a("2877")),f=Object(d["a"])(u,r,o,!1,null,"7685800b",null);f.options.__file="userRole.vue";t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-790478ef.a6308e29.js.map