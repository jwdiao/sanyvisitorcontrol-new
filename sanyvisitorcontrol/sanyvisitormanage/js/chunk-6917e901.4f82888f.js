(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6917e901"],{"0a0d":function(t,e,r){t.exports=r("e829")},"24cc":function(t,e,r){},"2f37":function(t,e,r){var i=r("63b6");i(i.S,"Date",{now:function(){return(new Date).getTime()}})},"47d5":function(t,e,r){"use strict";r.d(e,"g",function(){return s}),r.d(e,"a",function(){return o}),r.d(e,"e",function(){return c}),r.d(e,"d",function(){return u}),r.d(e,"c",function(){return l}),r.d(e,"j",function(){return m}),r.d(e,"b",function(){return d}),r.d(e,"k",function(){return p}),r.d(e,"i",function(){return f}),r.d(e,"h",function(){return h}),r.d(e,"f",function(){return g});r("96cf");var i=r("3b8d"),n=(r("cadf"),r("551c"),r("097d"),r("c1fb")),a=r("b1ef"),s=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,r,i){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["a"].post("".concat(a["a"],"/visitorcontrol/SanyBussVisitor/getVisitorAllByVisitorName"),{pageNum:e,pageSize:r,query:{visitorName:i}}));case 1:case"end":return t.stop()}},t,this)}));return function(e,r,i){return t.apply(this,arguments)}}(),o=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["a"].post("".concat(a["a"],"/visitorcontrol/SanyBussVisitor/addApply"),e));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),c=function(t){return n["a"].postFileData("".concat(a["a"],"/user/SanyBasicShrUser/fileUploadForVisitors"),t)},u=function(t){return n["a"].post("".concat(a["a"],"/user/SanyBasicShrUser/fileUploadForOutEmployersPhoto"),{imgStr:t})},l=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,r){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["a"].post("".concat(a["a"],"/visitorcontrol/SanyBussVisitor/confirmVisit"),{visitorId:e,source:r}));case 1:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),m=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["a"].post("".concat(a["a"],"/visitorcontrol/SanyBussVisitor/invalid"),{visitorId:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["a"].post("".concat(a["a"],"/visitorcontrol/SanyBussVisitor/cancel"),{visitorId:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["a"].post("".concat(a["a"],"/visitorcontrol/SanyBussVisitor/manualEnd"),{visitorId:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e,r,i,s){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["a"].post("".concat(a["a"],"/visitorcontrol/SanyBussVisitor/getVisitorHistory"),{pageNum:e,pageSize:r,query:{startTime:i,endTime:s}}));case 1:case"end":return t.stop()}},t,this)}));return function(e,r,i,n){return t.apply(this,arguments)}}(),h=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["a"].post("".concat(a["a"],"/visitorcontrol/SanyBussVisitor/getVisitorDetails"),{visitorId:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),g=function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",n["a"].post("".concat(a["a"],"/visitorcontrol/SanyBussVisitor/getNamesByLike"),{queryStr:e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},"5b4c":function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{},[r("el-form",{staticClass:"marginTop20 common-form-inline",attrs:{inline:!0,size:"medium"}},[r("el-form-item",{attrs:{label:"开始日期"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.pickerOptionsStart,placeholder:"选择日期"},model:{value:t.startTime,callback:function(e){t.startTime=e},expression:"startTime"}})],1),r("el-form-item",{attrs:{label:"结束日期"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.pickerOptionsEnd,placeholder:"选择日期"},model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSearch}},[t._v("数据查询")])],1)],1),r("div",{staticClass:"common-table"},[r("el-table",{staticStyle:{width:"100%"},attrs:{"header-row-class-name":"table-header",border:"",data:t.tableData}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"right","header-align":"center"}}),r("el-table-column",{attrs:{prop:"planBeginTime",label:"计划拜访开始时间",width:"180",align:"right","header-align":"center"}}),r("el-table-column",{attrs:{prop:"planEndTime",label:"计划拜访结束时间",width:"180",align:"right","header-align":"center"}}),r("el-table-column",{attrs:{prop:"vistorNum",label:"来访人员数",width:"130",align:"right","header-align":"center"}}),r("el-table-column",{attrs:{prop:"isCar",label:"是否驾车",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"carNum",label:"驾车数量",width:"120",align:"right","header-align":"center"}}),r("el-table-column",{attrs:{prop:"visitorStatus",label:"访问状态",width:"120",align:"center"}}),r("el-table-column",{attrs:{prop:"operaterCode",label:"操作人工号",align:"right","header-align":"center"}}),r("el-table-column",{attrs:{prop:"operaterName",label:"操作人姓名",align:"center"}}),r("el-table-column",{attrs:{label:"查看",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){t.lookInfo(e.$index,e.row)}}},[t._v("查看信息")])]}}])})],1)],1),r("div",{staticClass:"marginTop10 text-right"},[r("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":100,layout:"total, sizes, prev, pager, next, jumper",total:t.totalNum},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),r("div",{staticClass:"common_lookInfoDialog"},[r("el-dialog",{staticClass:"edit-form",attrs:{title:"拜访历史记录",visible:t.visitorInfomation,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visitorInfomation=e}}},[r("el-form",{ref:"editForm",attrs:{"v-model":t.editForm,"label-width":"110px",inline:!0}},[r("div",{staticClass:"endVisitSearchDialog"},[r("el-form-item",{attrs:{label:"开始时间"}},[r("el-input",{attrs:{disabled:""},model:{value:t.editForm.sanyBussVisitor.planBeginTime,callback:function(e){t.$set(t.editForm.sanyBussVisitor,"planBeginTime",e)},expression:"editForm.sanyBussVisitor.planBeginTime"}})],1),r("el-form-item",{attrs:{label:"结束时间"}},[r("el-input",{attrs:{disabled:""},model:{value:t.editForm.sanyBussVisitor.planEndTime,callback:function(e){t.$set(t.editForm.sanyBussVisitor,"planEndTime",e)},expression:"editForm.sanyBussVisitor.planEndTime"}})],1),r("el-form-item",{attrs:{label:"来访人员数量"}},[r("el-input",{attrs:{disabled:""},model:{value:t.editForm.sanyBussVisitor.vistorNum,callback:function(e){t.$set(t.editForm.sanyBussVisitor,"vistorNum",e)},expression:"editForm.sanyBussVisitor.vistorNum"}})],1),r("el-form-item",{attrs:{label:"是否驾车"}},[r("el-input",{attrs:{disabled:""},model:{value:t.editForm.sanyBussVisitor.isCar,callback:function(e){t.$set(t.editForm.sanyBussVisitor,"isCar",e)},expression:"editForm.sanyBussVisitor.isCar"}})],1),r("el-form-item",{attrs:{label:"驾车数量"}},[r("el-input",{attrs:{disabled:""},model:{value:t.editForm.sanyBussVisitor.carNum,callback:function(e){t.$set(t.editForm.sanyBussVisitor,"carNum",e)},expression:"editForm.sanyBussVisitor.carNum"}})],1),r("br"),r("el-form-item",{attrs:{label:"拜访原因"}},[r("el-input",{staticStyle:{width:"795px"},attrs:{disabled:"",type:"textarea",rows:3},model:{value:t.editForm.sanyBussVisitor.reason,callback:function(e){t.$set(t.editForm.sanyBussVisitor,"reason",e)},expression:"editForm.sanyBussVisitor.reason"}})],1)],1)]),r("div",{staticClass:"common-table"},[r("el-table",{attrs:{"header-row-class-name":"table-header",border:"",data:t.editForm.sanyBussVisitorDetailsList}},[r("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),r("el-table-column",{attrs:{prop:"visitorName",label:"拜访人姓名"}}),r("el-table-column",{attrs:{prop:"phone",label:"电话号码"}}),r("el-table-column",{attrs:{prop:"visitorId",label:"身份证号"}}),r("el-table-column",{attrs:{prop:"carNo",label:"车牌号码"}}),r("el-table-column",{attrs:{prop:"imgUrl",label:"图片名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){t.checkPicture(e.$index,e.row)}}},[t._v("查看图片")])]}}])})],1)],1),r("br")],1)],1),r("div",{staticClass:"checkPictureInformation"},[r("el-dialog",{staticClass:"edit-form",attrs:{title:"图片信息",visible:t.checkPictureInformationVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.checkPictureInformationVisible=e}}},[r("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",overflow:"hidden"}},[r("img",{staticStyle:{"max-width":"100%"},attrs:{src:t.currentImg,alt:""}})])])],1)],1)},n=[],a=(r("96cf"),r("3b8d")),s=r("0a0d"),o=r.n(s),c=(r("cadf"),r("551c"),r("097d"),r("47d5")),u={name:"VisitorHistoryRecord",data:function(){var t=this;return{startTime:"",endTime:"",pickerOptionsStart:{disabledDate:function(t){return t.getTime()<o()()-864e5}},pickerOptionsEnd:{disabledDate:function(e){return e.getTime()<new Date(t.startTime).getTime()}},tableData:[],currentPage:1,pageSize:10,totalNum:0,editForm:{sanyBussVisitor:{},sanyBussVisitorDetailsList:[],sanyBussVisitorCarList:[]},visitorInfomation:!1,checkPictureInformationVisible:!1,currentImg:""}},mounted:function(){this.getVisitorHistoryData(this.currentPage,this.pageSize,this.startTime,this.endTime)},methods:{getVisitorHistoryData:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e,r,i,n){var a,s,o,u;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["i"])(e,r,i,n);case 2:if(a=t.sent,console.log("获取的所有列表：",a),a&&a.data&&200===a.data.code){t.next=7;break}return this.$message({type:"success",message:a.data.msg}),t.abrupt("return");case 7:s=a.data.data,o=s.list,u=s.total,this.totalNum=u,this.tableData=o.map(function(t){var e=t.visitorStatus;"01"===e?e="待访问":"02"===e?e="访问中":"03"===e&&(e="访问结束");var r=t.auditingType;"01"===r?r="个人审核通过":"02"===r&&(r="门岗审核通过");var i=t.recordType;return"01"===i?i="被访人录入":"02"===i?i="访客机录入":"03"===i&&(i="门岗录入"),{id:t.id,planBeginTime:t.planBeginTime,planEndTime:t.planEndTime,beginTime:t.beginTime,endTime:t.endTime,vistorNum:t.vistorNum,isCar:t.isCar,carNum:t.carNum,visitorStatus:e,auditingType:r,recordType:i,operaterCode:t.operaterCode,operaterName:t.operaterName}});case 10:case"end":return t.stop()}},t,this)}));function e(e,r,i,n){return t.apply(this,arguments)}return e}(),handleSizeChange:function(t){this.pageSize=t,this.currentPage=1,this.getVisitorHistoryData(this.currentPage,this.pageSize,this.startTime,this.endTime)},handleCurrentChange:function(t){this.currentPage=t,this.getAllVisitorData(this.currentPage,this.pageSize,this.startTime,this.endTime)},onSearch:function(){this.currentPage=1,this.getVisitorHistoryData(this.currentPage,this.pageSize,this.startTime,this.endTime)},lookInfo:function(t,e){this.visitorInfomation=!0,this.getVisitorDetailsData(e.id)},getVisitorDetailsData:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["h"])(e);case 2:if(r=t.sent,r&&200===r.data.code){t.next=6;break}return this.$message({type:"error",message:r.data.msg}),t.abrupt("return");case 6:this.editForm=r.data.data,this.editForm.sanyBussVisitor.isCar="1"===this.editForm.sanyBussVisitor.isCar?"是":"否";case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),checkPicture:function(t,e){this.checkPictureInformationVisible=!0,this.currentImg=e.imgUrl}}},l=u,m=(r("606a"),r("2877")),d=Object(m["a"])(l,i,n,!1,null,"4ea9037b",null);d.options.__file="visitHistoryRecord.vue";e["default"]=d.exports},"606a":function(t,e,r){"use strict";var i=r("24cc"),n=r.n(i);n.a},e829:function(t,e,r){r("2f37"),t.exports=r("584a").Date.now}}]);
//# sourceMappingURL=chunk-6917e901.4f82888f.js.map