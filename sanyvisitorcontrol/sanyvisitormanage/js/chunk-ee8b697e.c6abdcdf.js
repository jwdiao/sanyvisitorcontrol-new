(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee8b697e"],{"0a49":function(e,t,a){var r=a("9b43"),o=a("626a"),l=a("4bf8"),n=a("9def"),i=a("cd1c");e.exports=function(e,t){var a=1==e,s=2==e,c=3==e,u=4==e,d=6==e,m=5==e||d,f=t||i;return function(t,i,h){for(var p,b,g=l(t),v=o(g),y=r(i,h,3),k=n(v.length),S=0,C=a?f(t,k):s?f(t,0):void 0;k>S;S++)if((m||S in v)&&(p=v[S],b=y(p,S,g),e))if(a)C[S]=b;else if(b)switch(e){case 3:return!0;case 5:return p;case 6:return S;case 2:C.push(p)}else if(u)return!1;return d?-1:c||u?u:C}}},1169:function(e,t,a){var r=a("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},7514:function(e,t,a){"use strict";var r=a("5ca1"),o=a("0a49")(5),l="find",n=!0;l in[]&&Array(1)[l](function(){n=!1}),r(r.P+r.F*n,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(l)},"7e15":function(e,t,a){},ac6a:function(e,t,a){for(var r=a("cadf"),o=a("0d58"),l=a("2aba"),n=a("7726"),i=a("32e9"),s=a("84f2"),c=a("2b4c"),u=c("iterator"),d=c("toStringTag"),m=s.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=o(f),p=0;p<h.length;p++){var b,g=h[p],v=f[g],y=n[g],k=y&&y.prototype;if(k&&(k[u]||i(k,u,m),k[d]||i(k,d,g),s[g]=m,v))for(b in r)k[b]||l(k,b,r[b],!0)}},cc79:function(e,t,a){"use strict";var r=a("7e15"),o=a.n(r);o.a},cd1c:function(e,t,a){var r=a("e853");e.exports=function(e,t){return new(r(e))(t)}},e853:function(e,t,a){var r=a("d3f4"),o=a("1169"),l=a("2b4c")("species");e.exports=function(e){var t;return o(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!o(t.prototype)||(t=void 0),r(t)&&(t=t[l],null===t&&(t=void 0))),void 0===t?Array:t}},f5e7:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{overflow:"hidden"}},[a("p",{staticClass:"common-breadcrumb"},[e._v("用户角色")]),a("div",{staticClass:"messageBox"},[a("div",{staticClass:"left"},[a("el-tree",{ref:"treeForm",attrs:{data:e.treeData,"show-checkbox":"","node-key":"id","default-expand-all":""},on:{"check-change":e.handleClick,"node-click":e.nodeClick}})],1),a("div",{staticClass:"right"},[a("el-form",{ref:"userForm",staticClass:"common-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[a("el-form-item",{attrs:{label:"员工姓名",prop:"userName"}},[a("el-input",{attrs:{placeholder:"员工姓名"},model:{value:e.formInline.userName,callback:function(t){e.$set(e.formInline,"userName",t)},expression:"formInline.userName"}})],1),a("el-form-item",{attrs:{label:"员工编号",prop:"userNo"}},[a("el-input",{ref:"userNo",attrs:{placeholder:"工号"},model:{value:e.formInline.userNo,callback:function(t){e.$set(e.formInline,"userNo",t)},expression:"formInline.userNo"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),a("div",{staticClass:"common-table"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-row-class-name":"table-header",height:"580"}},[a("el-table-column",{attrs:{prop:"num",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"userNo",label:"员工工号"}}),a("el-table-column",{attrs:{prop:"userName",label:"员工姓名"}}),a("el-table-column",{attrs:{prop:"roleName",label:"功能角色"}}),a("el-table-column",{attrs:{prop:"address",label:"修改角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.handleAmend(t.$index,t.row)}}},[e._v("修改角色")])]}}])})],1)],1),a("div",{staticClass:"marginTop10 text-right"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,40,80,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"工号","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.workno,callback:function(t){e.$set(e.form,"workno",t)},expression:"form.workno"}})],1),a("el-form-item",{attrs:{label:"用户角色","label-width":e.formLabelWidth,disabled:!0}},[a("el-select",{attrs:{placeholder:"请选择角色"},on:{change:e.selectRole},model:{value:e.roleValue,callback:function(t){e.roleValue=t},expression:"roleValue"}},e._l(e.roleOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirmRevision}},[e._v("确 定")])],1)],1)],1)])])},o=[],l=(a("96cf"),a("3b8d")),n=(a("7514"),a("ac6a"),a("c1fb")),i={name:"photoInputSearch",data:function(){return{treeData:[],defaultProps:{children:"children",label:"label"},formInline:{userName:"",userNo:""},roleOptions:[],dialogFormVisible:!1,formLabelWidth:"120px",roleCode:"",form:{name:"",workno:"",userRole:""},roleValue:"",selectedRoleName:"",editCheckId:"",tableData:[],currentPage:1,pageSize:10,pageTotal:0}},mounted:function(){this.roleCode="",this.selectRolue(),this.selectEmployerRole()},methods:{nodeClick:function(e,t,a){this.checkedId=e.id,this.$refs.treeForm.setCheckedNodes([e]),console.log(t)},handleClick:function(e,t,a){console.log(t),console.log(e),1==t&&(this.roleCode=e.value,this.checkedId=e.id,this.$refs.treeForm.setCheckedNodes([e]))},onSubmit:function(){var e=1;document.querySelectorAll(".el-checkbox__original").forEach(function(t,a){t.checked&&(e=2)}),1===e&&(this.roleCode=""),this.selectEmployerRole()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.selectEmployerRole()},handleCurrentChange:function(e){this.currentPage=e,this.selectEmployerRole()},selectRole:function(e){var t={};t=this.roleOptions.find(function(t){return t.value===e}),this.selectedRoleName=t.label},handleAmend:function(e,t){this.form.workno=t.userNo,this.form.name=t.userName,this.roleValue=t.roleName,console.log("row:",t),console.log("this.roleValue:",this.roleValue),this.dialogFormVisible=!0},confirmRevision:function(){var e=this;this.dialogFormVisible=!1,this.updateRole(),setTimeout(function(){e.selectEmployerRole()},1e3)},selectEmployerRole:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post("/user/SanyBasicShrUser/selectEmployerRoleByUserNoAndUserName",{query:{userName:this.formInline.userName,loginAccount:this.formInline.userNo,roleCode:this.roleCode},pageNum:this.currentPage,pageSize:this.pageSize});case 2:t=e.sent,console.log(t),console.log(t.data.data.list),t&&200===t.data.code&&(t.data.data.list.forEach(function(e,t){e.num=(a.currentPage-1)*a.pageSize+t+1}),this.tableData=t.data.data.list,this.pageTotal=t.data.data.total);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),selectRolue:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].get("/user/SanyBasicShrUser/selectRolesNoPage");case 2:t=e.sent,t.data&&200===t.data.code&&(console.log(t.data.data),this.treeData=t.data.data.map(function(e){return{label:e.roleName,value:e.roleCode,id:e.id}}),this.roleOptions=t.data.data.map(function(e){return{label:e.roleName,value:e.roleCode}}));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateRole:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["a"].post("/user/SanyBasicShrUser/updateRole",{loginAccount:this.form.workno,roleCode:this.roleValue,roleName:this.selectedRoleName});case 2:t=e.sent,console.log("roleValue:::",this.roleValue),200===t.data.code&&this.$message({type:"success",message:t.data.data});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},s=i,c=(a("cc79"),a("2877")),u=Object(c["a"])(s,r,o,!1,null,"399ef344",null);u.options.__file="userRole.vue";t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-ee8b697e.c6abdcdf.js.map