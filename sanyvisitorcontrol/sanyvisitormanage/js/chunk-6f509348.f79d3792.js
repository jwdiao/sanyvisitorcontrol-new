(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f509348"],{"0a0d":function(e,t,i){e.exports=i("e829")},"2f37":function(e,t,i){var n=i("63b6");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},"381d":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjYmVkMGEyOS1lMTYxLTRkZTYtODQ1MC0wYmQyMDg3ODI3YzIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDE5OEQzN0UzMzFFMTFFOTgwOEFCNjAzODI0NEI2Q0UiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDE5OEQzN0QzMzFFMTFFOTgwOEFCNjAzODI0NEI2Q0UiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYmVkMGEyOS1lMTYxLTRkZTYtODQ1MC0wYmQyMDg3ODI3YzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Y2JlZDBhMjktZTE2MS00ZGU2LTg0NTAtMGJkMjA4NzgyN2MyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pxbo8gAAAXVJREFUeNp0080rRFEYx/GZS1OWdpSSWXnZ2YgF2TCKbGykFI1iYcGG2VkPI0Vm4SVqlIUSWVAWsrCmhpSMpEz+AlFevo9+t04n99SnuXPPc+597nmeE19YO4h5oxlppJDUvRJOsYk7Nzhwrquwjit8YxL1Ytc/mltFIlxUqV+7caz/TSh7Wb3hEkvYxQn68RlmkEMFep3FGbxKRvfKWmgvWg4zaMEoGu2JChzGBIb0v4An7CtmBPfIB9qwbS/tHqzom00efc58WWvSgXb7yPvmeWzoukaZ3Hoxtmcpe0CD0vE37R2duMG1MnKHlTNpexCPRY89zGEnYv6vCiVt4H+jDocRc1bu50AdNhgRdIGPiDlbc24P2MIYar2ADn1e6z+LLXbcWtseUFSdC26LMrrRJe5IOPHFsBNn1etnTiaL6syc92Yr3xdm3MNk3TWgcpos2lTCapUzq7mH8Bz4p9HqPoV2pWmN9IJHndKE5qadlo/9CjAAZLpXQhtLAAsAAAAASUVORK5CYII="},"47d5":function(e,t,i){"use strict";i.d(t,"g",function(){return a}),i.d(t,"a",function(){return o}),i.d(t,"e",function(){return l}),i.d(t,"d",function(){return u}),i.d(t,"c",function(){return c}),i.d(t,"j",function(){return m}),i.d(t,"b",function(){return p}),i.d(t,"k",function(){return h}),i.d(t,"i",function(){return d}),i.d(t,"h",function(){return f}),i.d(t,"f",function(){return v});i("96cf");var n=i("3b8d"),r=(i("cadf"),i("551c"),i("097d"),i("c1fb")),s=i("b1ef"),a=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r["a"].post("".concat(s["a"],"/visitorcontrol/SanyBussVisitor/getVisitorAllByVisitorName"),{pageNum:t,pageSize:i,query:{visitorName:n}}));case 1:case"end":return e.stop()}},e,this)}));return function(t,i,n){return e.apply(this,arguments)}}(),o=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r["a"].post("".concat(s["a"],"/visitorcontrol/SanyBussVisitor/addApply"),t));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),l=function(e){return r["a"].postFileData("".concat(s["a"],"/user/SanyBasicShrUser/fileUploadForVisitors"),e)},u=function(e){return r["a"].post("".concat(s["a"],"/user/SanyBasicShrUser/fileUploadForOutEmployersPhoto"),{imgStr:e})},c=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r["a"].post("".concat(s["a"],"/visitorcontrol/SanyBussVisitor/confirmVisit"),{visitorId:t,source:i}));case 1:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}(),m=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r["a"].post("".concat(s["a"],"/visitorcontrol/SanyBussVisitor/invalid"),{visitorId:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r["a"].post("".concat(s["a"],"/visitorcontrol/SanyBussVisitor/cancel"),{visitorId:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r["a"].post("".concat(s["a"],"/visitorcontrol/SanyBussVisitor/manualEnd"),{visitorId:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i,n,a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r["a"].post("".concat(s["a"],"/visitorcontrol/SanyBussVisitor/getVisitorHistory"),{pageNum:t,pageSize:i,query:{startTime:n,endTime:a}}));case 1:case"end":return e.stop()}},e,this)}));return function(t,i,n,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r["a"].post("".concat(s["a"],"/visitorcontrol/SanyBussVisitor/getVisitorDetails"),{visitorId:t}));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",r["a"].post("".concat(s["a"],"/visitorcontrol/SanyBussVisitor/getNamesByLike"),{queryStr:t,queryNo:i}));case 1:case"end":return e.stop()}},e,this)}));return function(t,i){return e.apply(this,arguments)}}()},"69c0":function(e,t,i){"use strict";var n=i("6e7d"),r=i.n(n);r.a},"6e7d":function(e,t,i){},"7f7f":function(e,t,i){var n=i("86cc").f,r=Function.prototype,s=/^\s*function ([^ (]*)/,a="name";a in r||i("9e1e")&&n(r,a,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},"9a38":function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r});i("cadf"),i("551c"),i("097d");var n=function(e,t){console.log("tel:",e),11===e.length?/^1[3456789]\d{9}$/.test(e)||t.$message({type:"error",message:"手机号码格式错误，请重新输入"}):t.$message({type:"error",message:"请输入11位手机号码"})};function r(e,t){15===e.length?/(^\d{15}$)/.test(e)||t.$message({type:"error",message:"身份证号码格式错误，请重新输入"}):18===e.length?/(^\d{17}([0-9]|x|X)$)/.test(e)||t.$message({type:"error",message:"身份证号码格式错误，请重新输入"}):t.$message({type:"error",message:"请输入15位或18位身份证号码"})}},ac6a:function(e,t,i){for(var n=i("cadf"),r=i("0d58"),s=i("2aba"),a=i("7726"),o=i("32e9"),l=i("84f2"),u=i("2b4c"),c=u("iterator"),m=u("toStringTag"),p=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=r(h),f=0;f<d.length;f++){var v,g=d[f],y=h[g],I=a[g],b=I&&I.prototype;if(b&&(b[c]||o(b,c,p),b[m]||o(b,m,g),l[g]=p,y))for(v in n)b[v]||s(b,v,n[v],!0)}},c72d:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:e.handleAllChange}},[n("el-form",{ref:"tempVisitInputID",staticClass:"marginTop20 common-form-inline tempVisitInput_form",staticStyle:{position:"relative"},attrs:{inline:!0,model:e.formInline.sanyBussVisitor,rules:e.rules,size:"medium","label-width":"100px"}},[n("el-form-item",{attrs:{label:"被拜访人"}},[n("el-input",{on:{blur:e.blurVisitor},nativeOn:{keyup:function(t){return e.querySearch(t)}},model:{value:e.formInline.sanyBussVisitor.employerName,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"employerName",t)},expression:"formInline.sanyBussVisitor.employerName"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.employerNameSelectShow,expression:"employerNameSelectShow"}],ref:"userNameClick",staticClass:"tempVisitInput_employerName",attrs:{id:"userNameClick"}},[n("el-scrollbar",{staticStyle:{height:"100%"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:e.restaurantsArr.length>0,expression:"restaurantsArr.length>0"}]},e._l(e.restaurantsArr,function(t,i){return n("li",{key:i,staticStyle:{cursor:"pointer"},on:{click:function(i){e.handleSelect(t)}}},[e._v("\n               "+e._s(t.name)+"\n             ")])}),0),n("div",{directives:[{name:"show",rawName:"v-show",value:e.restaurantsArr.length<=0,expression:"restaurantsArr.length<=0"}]},[e._v("暂无数据")])])],1)],1),n("el-form-item",{attrs:{label:"到访日期",prop:"planBeginTime"}},[n("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","default-value":new Date,"picker-options":e.pickerOptionsStart,placeholder:"选择到访日期 "},model:{value:e.formInline.sanyBussVisitor.planBeginTime,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"planBeginTime",t)},expression:"formInline.sanyBussVisitor.planBeginTime"}})],1),n("el-form-item",{attrs:{label:"拜访时间",prop:"visitingTime"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.sanyBussVisitor.visitingTime,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"visitingTime",t)},expression:"formInline.sanyBussVisitor.visitingTime"}},e._l(e.visitingTimeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),n("el-form-item",{attrs:{label:"来访人数量"}},[n("el-input-number",{attrs:{controls:!1,disabled:"",min:e.formInline.sanyBussVisitor.vistorNum},on:{change:e.handleInputPersonNum,blur:function(t){e.blurVisitorNum()}},model:{value:e.formInline.sanyBussVisitor.vistorNum,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"vistorNum",t)},expression:"formInline.sanyBussVisitor.vistorNum"}})],1),n("el-form-item",{attrs:{label:"是否驾车"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:e.formInline.sanyBussVisitor.isCar,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"isCar",t)},expression:"formInline.sanyBussVisitor.isCar"}},e._l(e.isDriveCarOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.formInline.sanyBussVisitor.isCar,expression:"formInline.sanyBussVisitor.isCar==='1'"}],attrs:{label:"驾车数量"}},[n("el-input-number",{attrs:{controls:!0,min:1},on:{change:e.handleInputCarNum},model:{value:e.formInline.sanyBussVisitor.carNum,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"carNum",t)},expression:"formInline.sanyBussVisitor.carNum"}})],1),n("el-form-item",{attrs:{label:"拜访原因"}},[n("el-input",{staticStyle:{width:"1285px"},attrs:{type:"textarea",rows:4,placeholder:"请输入原因"},model:{value:e.formInline.sanyBussVisitor.reason,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"reason",t)},expression:"formInline.sanyBussVisitor.reason"}})],1),n("div",[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.handleInputPersonNum}},[e._v("新增")]),e._v("   \n         "),n("el-tooltip",{attrs:{content:"点击新增，增加来访人员列表数量",placement:"top"}},[n("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:i("381d"),alt:""}})])],1)],1)],1),n("div",{staticClass:"tempVisitInput_table tempVisitInput_personTable"},[n("table",[e._m(0),n("tbody",e._l(e.formInline.sanyBussVisitorDetailsList,function(t,i){return n("tr",{key:i},[n("td",{domProps:{textContent:e._s(i+1)}},[e._v("1")]),n("td",{staticStyle:{position:"relative"}},[n("el-input",{class:{regIsNull:e.regIsName},attrs:{placeholder:"请输入姓名"},on:{blur:function(i){e.blurUserName(t.visitorName)},change:function(i){e.inputChangeName(t.visitorName)}},model:{value:t.visitorName,callback:function(i){e.$set(t,"visitorName",i)},expression:"item.visitorName"}}),n("span",{staticStyle:{position:"absolute",top:"22px",left:"0px",color:"#f56c6c"}},[e._v("*")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowUserName,expression:"isShowUserName"}],staticStyle:{color:"#F56C6C","text-align":"left",position:"absolute",top:"50px",left:"8px"}},[e._v("请输入姓名")])],1),n("td",{staticStyle:{position:"relative"}},[n("el-input",{class:{regIsNull:e.regIsNull},attrs:{placeholder:"请输入电话"},on:{blur:function(i){e.blurPhone(t.phone)},change:function(i){e.regTel(t.phone)}},model:{value:t.phone,callback:function(i){e.$set(t,"phone",i)},expression:"item.phone"}}),n("span",{staticStyle:{position:"absolute",top:"22px",left:"0px",color:"#f56c6c"}},[e._v("*")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowPhone,expression:"isShowPhone"}],staticStyle:{color:"#F56C6C","text-align":"left",position:"absolute",top:"50px",left:"8px"}},[e._v("请输入电话")])],1),n("td",{staticStyle:{position:"relative"}},[n("el-input",{class:{regIsNull:e.regIsIDCard},attrs:{placeholder:"请输入身份证号"},on:{blur:function(i){e.blurIdCard(t.visitorId)},change:function(i){e.regID(t.visitorId)}},model:{value:t.visitorId,callback:function(i){e.$set(t,"visitorId",i)},expression:"item.visitorId"}}),n("span",{staticStyle:{position:"absolute",top:"22px",left:"0px",color:"#f56c6c"}},[e._v("*")]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowIDCard,expression:"isShowIDCard"}],staticStyle:{color:"#F56C6C","text-align":"left",position:"absolute",top:"50px",left:"8px"}},[e._v("请输入身份证号")])],1),n("td",[n("el-input",{attrs:{placeholder:"请输入车牌号"},model:{value:t.carId,callback:function(i){e.$set(t,"carId",i)},expression:"item.carId"}})],1),n("td",[n("div",[n("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.imgUrl,expression:"!item.imgUrl"}],attrs:{size:"mini",type:"primary"},on:{click:function(t){e.handlePhotoUploadStart(i)}}},[e._v("开始拍照")])],1),n("div",[n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"item.imgUrl"}],attrs:{size:"mini",type:"primary"},on:{click:function(t){e.handlePhotoUpload(i)}}},[e._v("重新拍照")])],1)]),n("td",[n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"item.imgUrl"}],attrs:{size:"mini",type:"text"},on:{click:function(t){e.handleLookImg(i)}}},[e._v("查看图片")])],1),n("td",[n("el-button",{attrs:{type:"danger",size:"mini",disabled:e.deleteDisabled},on:{click:function(n){e.deleteSingleLine(t,i)}}},[e._v("删除")])],1)])}),0)])]),n("div",{staticClass:"tempVisitInput_camera"},[n("el-dialog",{attrs:{title:"提示",visible:e.dialogVisible,width:"1100px",height:"600px","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("div",{staticClass:"fatheramalltitle"},[n("input",{attrs:{type:"hidden",value:"",id:"photoUrl"}}),n("iframe",{attrs:{width:"100%",height:"470",frameborder:"0",src:"http://10.19.8.22:8081/sanyvisitorcontrol/photo/photo.html",id:"myframe",name:"myframe"}}),n("el-tooltip",{staticClass:"small-title",attrs:{content:"必须点击拍照后再确定，否则将保存默认图片显示区内图片",placement:"top"}},[n("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:i("381d"),alt:""}})])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirmCamera}},[e._v("确 定")])],1)])],1),n("el-dialog",{staticClass:"edit-form",attrs:{title:"图片信息",visible:e.dialogVisibleImg,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisibleImg=t}}},[n("div",{staticClass:"inputText",staticStyle:{display:"flex","justify-content":"center","align-items":"center",overflow:"hidden"}},[n("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.lookCurrentImgUrl,alt:""}})])]),n("div",{staticClass:"marginTop20",staticStyle:{"text-align":"center"}},[n("el-button",{staticStyle:{width:"120px"},attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("保存")])],1)],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("thead",[i("tr",[i("th",[e._v("序号")]),i("th",[e._v("拜访人姓名")]),i("th",[e._v("电话号码")]),i("th",[e._v("身份证号")]),i("th",[e._v("车牌号")]),i("th",[e._v("拍照")]),i("th",[e._v("查看图片")]),i("th",[e._v("操作")])])])}],s=(i("ac6a"),i("7f7f"),i("96cf"),i("3b8d")),a=i("0a0d"),o=i.n(a),l=(i("cadf"),i("551c"),i("097d"),i("47d5")),u=i("9a38"),c={name:"tempVisitInput",data:function(){return{deleteDisabled:!1,restaurantsArr:[],employerNameSelectShow:!1,isDriveCarOptions:[{label:"是",value:"1"},{label:"否",value:"0"}],visitingTimeOptions:[{label:"上午",value:"01"},{label:"下午",value:"02"},{label:"全天",value:"03"}],pickerOptionsStart:{disabledDate:function(e){return e.getTime()<o()()-864e5}},regIsNull:!1,regIsIDCard:!1,regIsName:!1,isShowUserName:!1,isShowPhone:!1,isShowIDCard:!1,rules:{planBeginTime:[{required:!0,message:"请选择开始时间",trigger:"blur"}]},formInline:{sanyBussVisitor:{planBeginTime:"",visitingTime:"",vistorNum:1,isCar:"0",carNum:"",reason:""},sanyBussVisitorDetailsList:[{visitorName:"",phone:"",visitorId:"",imgUrl:"",carId:""}],sanyBussVisitorCarList:[]},dialogVisible:!1,dialogVisibleImg:!1,currentUploadIndex:0,lookCurrentImgUrl:0}},mounted:function(){},methods:{getNamesByLikeData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,i){var n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["f"])(t,i);case 2:n=e.sent,n&&200===n.data.code&&(r=n.data.data,this.restaurantsArr=r,console.log("restaurants",r),this.employerNameSelectShow=!0);case 4:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}(),querySearch:function(e){var t=this.formInline.sanyBussVisitor.employerName;if(t){var i=/^[0-9]\d*$|^0$/;if(1==i.test(t)){var n="";this.getNamesByLikeData(n,t)}else{var r="";this.getNamesByLikeData(t,r)}}},handleSelect:function(e){this.formInline.sanyBussVisitor.employerName=e.name,this.formInline.sanyBussVisitor.employerCode=e.userNo,this.employerNameSelectShow=!1},handleAllChange:function(e){var t=this.$refs.userNameClick;t&&(t.contains(e.target)||(this.employerNameSelectShow=!1))},handleInputPersonNum:function(){var e=this.formInline.sanyBussVisitorDetailsList.length;this.formInline.sanyBussVisitor.vistorNum=e+1;var t={visitorName:"",phone:"",visitorId:"",imgUrl:"",carId:""};this.formInline.sanyBussVisitorDetailsList.splice(e,0,t),this.formInline.sanyBussVisitorDetailsList.length<=1?this.deleteDisabled=!0:this.deleteDisabled=!1},blurVisitorNum:function(){this.formInline.sanyBussVisitor.vistorNum=this.formInline.sanyBussVisitorDetailsList.length},handlePhotoUploadStart:function(e){this.dialogVisible=!0,this.currentUploadIndex=e,myframe.window.Webcam.attach("#my_camera");myframe.window.getTakePhotoUrl()},handlePhotoUpload:function(e){this.dialogVisible=!0,this.currentUploadIndex=e,myframe.window.Webcam.attach("#my_camera")},handleConfirmCamera:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.dialogVisible=!1,t=myframe.window.getTakePhotoUrl(),!t){e.next=7;break}return e.next=5,Object(l["d"])(t);case 5:i=e.sent,i&&200===i.data.code?this.formInline.sanyBussVisitorDetailsList[this.currentUploadIndex].imgUrl=i.data.data:this.$message({type:"error",message:"图片上传服务器失败！"});case 7:myframe.window.Webcam.reset();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleLookImg:function(e){this.dialogVisibleImg=!0,this.currentUploadIndex=e,this.lookCurrentImgUrl=this.formInline.sanyBussVisitorDetailsList[this.currentUploadIndex].imgUrl},handleInputCarNum:function(){var e=this.formInline.sanyBussVisitor,t=e.carNum,i=e.vistorNum;if(t>i)return this.formInline.sanyBussVisitor.carNum=this.formInline.sanyBussVisitor.vistorNum-1,void this.$message({type:"error",message:"输入车辆必须小于人员数量"})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e(),Webcam.reset()}).catch(function(e){})},handleSave:function(){var e=this,t=this.formInline.sanyBussVisitor.employerName;this.restaurantsArr.forEach(function(i,n){console.log("employerName",t),console.log("item.name",i.name),console.log("item.userNo",i.userNo),i.name===t||i.userNo===t?e.$refs.tempVisitInputID.validate(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(i){var n,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i){t.next=2;break}return t.abrupt("return");case 2:n=e.formInline.sanyBussVisitorDetailsList,r=0;case 4:if(!(r<n.length)){t.next=11;break}if(""===n[r].visitorName?(e.regIsName=!0,e.isShowUserName=!0):""===n[r].phone?(e.regIsNull=!0,e.isShowPhone=!0):""===n[r].visitorId&&(e.regIsIDCard=!0,e.isShowIDCard=!0),""!==n[r].visitorName&&""!==n[r].visitorId&&""!==n[r].phone){t.next=8;break}return t.abrupt("return");case 8:r++,t.next=4;break;case 11:new Date(e.formInline.sanyBussVisitor.planBeginTime).getTime(),e.formInline.source=2,e.addApplyRequestData(e.formInline);case 14:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()):e.$message({message:"保存失败，输入的拜访人信息未找到"})})},addApplyRequestData:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["a"])(t);case 2:if(i=e.sent,i&&200===i.data.code){e.next=6;break}return this.$message({type:"error",message:i.data.msg}),e.abrupt("return");case 6:this.$message({type:"success",message:i.data.data}),this.formInline.sanyBussVisitor={planBeginTime:"",visitingTime:"",vistorNum:"",isCar:"",carNum:"",reason:""},this.formInline.sanyBussVisitorDetailsList=[],this.formInline.sanyBussVisitorCarList=[];case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),regTel:function(e){Object(u["b"])(e,this),console.log("tel:",e),this.regIsNull=""===e},regID:function(e){Object(u["a"])(e,this),this.regIsIDCard=""===e},inputChangeName:function(e){this.regIsName=""===e},blurUserName:function(e){this.regIsName=""===e,this.isShowUserName=""===e},blurPhone:function(e){this.regIsNull=""===e,this.isShowPhone=""===e},blurIdCard:function(e){this.regIsIDCard=""===e,this.isShowIDCard=""===e},deleteSingleLine:function(e,t){if(this.formInline.sanyBussVisitorDetailsList.length<=1)return this.deleteDisabled=!0,void this.$message({message:"删除失败,默认保留一行"});this.formInline.sanyBussVisitorDetailsList.splice(t,1),this.formInline.sanyBussVisitor.vistorNum=this.formInline.sanyBussVisitorDetailsList.length,this.formInline.sanyBussVisitor.carNum=this.formInline.sanyBussVisitor.vistorNum,console.log("删除行index:",t),console.log("删除行:",this.formInline.sanyBussVisitorDetailsList)},blurVisitor:function(){}}},m=c,p=(i("69c0"),i("2877")),h=Object(p["a"])(m,n,r,!1,null,"62f5f33d",null);h.options.__file="tempVisitInput.vue";t["default"]=h.exports},e829:function(e,t,i){i("2f37"),e.exports=i("584a").Date.now}}]);
//# sourceMappingURL=chunk-6f509348.f79d3792.js.map