(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-440e6248"],{"0a49":function(e,t,r){var o=r("9b43"),a=r("626a"),n=r("4bf8"),l=r("9def"),i=r("cd1c");e.exports=function(e,t){var r=1==e,s=2==e,c=3==e,u=4==e,d=6==e,f=5==e||d,m=t||i;return function(t,i,h){for(var p,b,g=n(t),v=a(g),y=o(i,h,3),S=l(v.length),k=0,C=r?m(t,S):s?m(t,0):void 0;S>k;k++)if((f||k in v)&&(p=v[k],b=y(p,k,g),e))if(r)C[k]=b;else if(b)switch(e){case 3:return!0;case 5:return p;case 6:return k;case 2:C.push(p)}else if(u)return!1;return d?-1:c||u?u:C}}},1169:function(e,t,r){var o=r("2d95");e.exports=Array.isArray||function(e){return"Array"==o(e)}},"20fd":function(e,t,r){"use strict";var o=r("d9f6"),a=r("aebd");e.exports=function(e,t,r){t in e?o.f(e,t,a(0,r)):e[t]=r}},"549b":function(e,t,r){"use strict";var o=r("d864"),a=r("63b6"),n=r("241e"),l=r("b0dc"),i=r("3702"),s=r("b447"),c=r("20fd"),u=r("7cd6");a(a.S+a.F*!r("4ee1")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,a,d,f=n(e),m="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,b=void 0!==p,g=0,v=u(f);if(b&&(p=o(p,h>2?arguments[2]:void 0,2)),void 0==v||m==Array&&i(v))for(t=s(f.length),r=new m(t);t>g;g++)c(r,g,b?p(f[g],g):f[g]);else for(d=v.call(f),r=new m;!(a=d.next()).done;g++)c(r,g,b?l(d,p,[a.value,g],!0):a.value);return r.length=g,r}})},7514:function(e,t,r){"use strict";var o=r("5ca1"),a=r("0a49")(5),n="find",l=!0;n in[]&&Array(1)[n](function(){l=!1}),o(o.P+o.F*l,"Array",{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")(n)},"774e":function(e,t,r){e.exports=r("d2d5")},"976e":function(e,t,r){"use strict";var o=r("e78d"),a=r.n(o);a.a},ac6a:function(e,t,r){for(var o=r("cadf"),a=r("0d58"),n=r("2aba"),l=r("7726"),i=r("32e9"),s=r("84f2"),c=r("2b4c"),u=c("iterator"),d=c("toStringTag"),f=s.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},h=a(m),p=0;p<h.length;p++){var b,g=h[p],v=m[g],y=l[g],S=y&&y.prototype;if(S&&(S[u]||i(S,u,f),S[d]||i(S,d,g),s[g]=f,v))for(b in o)S[b]||n(S,b,o[b],!0)}},cd1c:function(e,t,r){var o=r("e853");e.exports=function(e,t){return new(o(e))(t)}},d2d5:function(e,t,r){r("1654"),r("549b"),e.exports=r("584a").Array.from},e78d:function(e,t,r){},e853:function(e,t,r){var o=r("d3f4"),a=r("1169"),n=r("2b4c")("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),o(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}},f5e7:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{overflow:"hidden"}},[r("p",{staticClass:"common-breadcrumb"},[e._v("用户角色")]),r("div",{staticClass:"messageBox"},[r("div",{staticClass:"left"},[r("el-tree",{ref:"treeForm",attrs:{data:e.treeData,"show-checkbox":"","node-key":"id","default-expand-all":""},on:{"check-change":e.handleClick,"node-click":e.nodeClick}})],1),r("div",{staticClass:"right"},[r("el-form",{ref:"userForm",staticClass:"common-form-inline",attrs:{inline:!0,model:e.formInline,size:"medium"}},[r("el-form-item",{attrs:{label:"员工姓名",prop:"userName"}},[r("el-input",{attrs:{placeholder:"员工姓名"},model:{value:e.formInline.userName,callback:function(t){e.$set(e.formInline,"userName",t)},expression:"formInline.userName"}})],1),r("el-form-item",{attrs:{label:"员工编号",prop:"userNo"}},[r("el-input",{ref:"userNo",attrs:{placeholder:"工号"},model:{value:e.formInline.userNo,callback:function(t){e.$set(e.formInline,"userNo",t)},expression:"formInline.userNo"}})],1),r("el-form-item",[r("el-button",{staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),r("div",{staticClass:"common-table"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-row-class-name":"table-header",height:"580"}},[r("el-table-column",{attrs:{prop:"num",label:"序号",width:"80"}}),r("el-table-column",{attrs:{prop:"userNo",label:"员工工号"}}),r("el-table-column",{attrs:{prop:"userName",label:"员工姓名"}}),r("el-table-column",{attrs:{prop:"roleName",label:"功能角色"}}),r("el-table-column",{attrs:{prop:"address",label:"修改角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(r){e.handleAmend(t.$index,t.row)}}},[e._v("修改角色")])]}}])})],1)],1),r("div",{staticClass:"marginTop10 text-right"},[r("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,40,80,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{attrs:{model:e.form}},[r("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"工号","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.workno,callback:function(t){e.$set(e.form,"workno",t)},expression:"form.workno"}})],1),r("el-form-item",{attrs:{label:"用户角色","label-width":e.formLabelWidth,disabled:!0}},[r("el-select",{attrs:{placeholder:"请选择角色"},on:{change:e.selectRole},model:{value:e.roleValue,callback:function(t){e.roleValue=t},expression:"roleValue"}},e._l(e.roleOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirmRevision}},[e._v("确 定")])],1)],1)],1)])])},a=[],n=(r("96cf"),r("3b8d")),l=(r("7514"),r("774e")),i=r.n(l),s=(r("ac6a"),r("cadf"),r("551c"),r("097d"),r("c1fb")),c={name:"photoInputSearch",data:function(){return{treeData:[],defaultProps:{children:"children",label:"label"},formInline:{userName:"",userNo:""},roleOptions:[],dialogFormVisible:!1,formLabelWidth:"120px",roleCode:"",form:{name:"",workno:"",userRole:""},roleValue:"",selectedRoleName:"",editCheckId:"",tableData:[],currentPage:1,pageSize:10,pageTotal:0}},mounted:function(){this.roleCode="",this.selectRolue(),this.selectEmployerRole()},methods:{nodeClick:function(e,t,r){this.checkedId=e.id,this.$refs.treeForm.setCheckedNodes([e]),console.log(t)},handleClick:function(e,t,r){console.log(t),console.log(e),1==t&&(this.roleCode=e.value,this.checkedId=e.id,this.$refs.treeForm.setCheckedNodes([e]))},onSubmit:function(){var e=1;i()(document.querySelectorAll(".el-checkbox__original")).forEach(function(t,r){t.checked&&(e=2)}),1===e&&(this.roleCode=""),this.selectEmployerRole()},handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.selectEmployerRole()},handleCurrentChange:function(e){this.currentPage=e,this.selectEmployerRole()},selectRole:function(e){var t={};t=this.roleOptions.find(function(t){return t.value===e}),this.selectedRoleName=t.label},handleAmend:function(e,t){this.form.workno=t.userNo,this.form.name=t.userName,this.roleValue=t.roleName,console.log("row:",t),console.log("this.roleValue:",this.roleValue),this.dialogFormVisible=!0},confirmRevision:function(){var e=this;this.dialogFormVisible=!1,this.updateRole(),setTimeout(function(){e.selectEmployerRole()},1e3)},selectEmployerRole:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].post("/user/SanyBasicShrUser/selectEmployerRoleByUserNoAndUserName",{query:{userName:this.formInline.userName,loginAccount:this.formInline.userNo,roleCode:this.roleCode},pageNum:this.currentPage,pageSize:this.pageSize});case 2:t=e.sent,console.log(t),console.log(t.data.data.list),t&&200===t.data.code&&(t.data.data.list.forEach(function(e,t){e.num=(r.currentPage-1)*r.pageSize+t+1}),this.tableData=t.data.data.list,this.pageTotal=t.data.data.total);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),selectRolue:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].post("/user/SanyBasicShrUser/selectRolesNoPage");case 2:t=e.sent,t.data&&200===t.data.code&&(console.log(t.data.data),this.treeData=t.data.data.map(function(e){return{label:e.roleName,value:e.roleCode,id:e.id}}),this.roleOptions=t.data.data.map(function(e){return{label:e.roleName,value:e.roleCode}}));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updateRole:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["a"].post("/user/SanyBasicShrUser/updateRole",{loginAccount:this.form.workno,roleCode:this.roleValue,roleName:this.selectedRoleName});case 2:t=e.sent,console.log("roleValue:::",this.roleValue),200===t.data.code&&this.$message({type:"success",message:t.data.data});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},u=c,d=(r("976e"),r("2877")),f=Object(d["a"])(u,o,a,!1,null,"57fc1ac6",null);f.options.__file="userRole.vue";t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-440e6248.063276db.js.map