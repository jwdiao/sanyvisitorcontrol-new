(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5448c794"],{"0a0d":function(e,t,i){e.exports=i("e829")},"2f37":function(e,t,i){var s=i("63b6");s(s.S,"Date",{now:function(){return(new Date).getTime()}})},3099:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpjYmVkMGEyOS1lMTYxLTRkZTYtODQ1MC0wYmQyMDg3ODI3YzIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RDE5OEQzN0UzMzFFMTFFOTgwOEFCNjAzODI0NEI2Q0UiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RDE5OEQzN0QzMzFFMTFFOTgwOEFCNjAzODI0NEI2Q0UiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpjYmVkMGEyOS1lMTYxLTRkZTYtODQ1MC0wYmQyMDg3ODI3YzIiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6Y2JlZDBhMjktZTE2MS00ZGU2LTg0NTAtMGJkMjA4NzgyN2MyIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+pxbo8gAAAXVJREFUeNp0080rRFEYx/GZS1OWdpSSWXnZ2YgF2TCKbGykFI1iYcGG2VkPI0Vm4SVqlIUSWVAWsrCmhpSMpEz+AlFevo9+t04n99SnuXPPc+597nmeE19YO4h5oxlppJDUvRJOsYk7Nzhwrquwjit8YxL1Ytc/mltFIlxUqV+7caz/TSh7Wb3hEkvYxQn68RlmkEMFep3FGbxKRvfKWmgvWg4zaMEoGu2JChzGBIb0v4An7CtmBPfIB9qwbS/tHqzom00efc58WWvSgXb7yPvmeWzoukaZ3Hoxtmcpe0CD0vE37R2duMG1MnKHlTNpexCPRY89zGEnYv6vCiVt4H+jDocRc1bu50AdNhgRdIGPiDlbc24P2MIYar2ADn1e6z+LLXbcWtseUFSdC26LMrrRJe5IOPHFsBNn1etnTiaL6syc92Yr3xdm3MNk3TWgcpos2lTCapUzq7mH8Bz4p9HqPoV2pWmN9IJHndKE5qadlo/9CjAAZLpXQhtLAAsAAAAASUVORK5CYII="},ac6a:function(e,t,i){for(var s=i("cadf"),a=i("0d58"),n=i("2aba"),r=i("7726"),o=i("32e9"),l=i("84f2"),c=i("2b4c"),u=c("iterator"),m=c("toStringTag"),d=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=a(h),g=0;g<p.length;g++){var f,v=p[g],b=h[v],y=r[v],I=y&&y.prototype;if(I&&(I[u]||o(I,u,d),I[m]||o(I,m,v),l[v]=d,b))for(f in s)I[f]||n(I,f,s[f],!0)}},d2e6:function(e,t,i){"use strict";var s=i("d8b4"),a=i.n(s);a.a},d8b4:function(e,t,i){},dfc7:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{},[s("el-form",{staticClass:"marginTop20 common-form-inline",attrs:{inline:!0,size:"medium"}},[s("el-form-item",{attrs:{label:"访客姓名"}},[s("el-input",{attrs:{placeholder:"访客姓名"},model:{value:e.visitorName,callback:function(t){e.visitorName=t},expression:"visitorName"}})],1),s("el-form-item",[s("el-button",{staticClass:"btnIsBlue",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.handleSearchByName}},[e._v("查询")]),s("el-button",{staticClass:"btnIsBlue",attrs:{type:"primary"},on:{click:e.handleAddVisitor}},[e._v("新增访客")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[s("canvas",{ref:"canvas",staticStyle:{width:"300px",height:"300px"},attrs:{id:"canvas"}})])],1),s("div",{staticClass:"common-table"},[e.loadingStatus?s("div",{staticClass:"lazyImg"},[s("span",{staticClass:"lazyText"},[e._v("数据加载中")])]):e._e(),e.noDataStatus?s("div",{staticClass:"lazyImg"},[s("span",{staticClass:"lazyText"},[e._v("暂无数据")])]):e._e(),e.loadingStatus?e._e():s("el-table",{directives:[{name:"show",rawName:"v-show",value:!e.noDataStatus,expression:"!noDataStatus"},{name:"loading",rawName:"v-loading",value:e.loadingSwitch,expression:"loadingSwitch"}],staticStyle:{width:"100%"},attrs:{"header-row-class-name":"table-header",border:"",data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{prop:"number",label:"序号",width:"50",align:"left","header-align":"left"}}),s("el-table-column",{attrs:{prop:"planBeginTime",label:"到访日期",width:"100",align:"left","header-align":"left"}}),s("el-table-column",{attrs:{prop:"visitingTime",label:"拜访时间",align:"left","header-align":"left"}}),s("el-table-column",{attrs:{prop:"vistorNum",label:"访客人数",align:"left","header-align":"left"}}),s("el-table-column",{attrs:{prop:"isVip",label:"访客类型",align:"left","header-align":"left"}}),s("el-table-column",{attrs:{prop:"isCar",label:"是否驾车",align:"left"}}),s("el-table-column",{attrs:{prop:"carNum",label:"驾车数量",align:"left","header-align":"left"}}),s("el-table-column",{attrs:{prop:"visitorStatus",label:"访问状态",align:"left"}}),s("el-table-column",{attrs:{prop:"submitStatus",label:"单据状态",align:"left"}}),s("el-table-column",{attrs:{prop:"userName",label:"操作人",align:"left","header-align":"left",width:"110"}}),s("el-table-column",{attrs:{prop:"downStatus",label:"登记状态",align:"left","header-align":"left"}}),s("el-table-column",{attrs:{label:"信息维护",width:"90",align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){e.handleLookInfo(t.$index,t.row)}}},[e._v("信息维护")])]}}])}),s("el-table-column",{attrs:{label:"记录操作",width:"140",align:"left","header-align":"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:"审核通过"===t.row.submitStatus&&"未登记"===t.row.downStatus,expression:"scope.row.submitStatus==='审核通过' && scope.row.downStatus==='未登记'"}],attrs:{size:"mini",type:"text"},on:{click:function(i){e.handleInvalid(t.$index,t.row)}}},[e._v("作废 ")]),s("el-button",{directives:[{name:"show",rawName:"v-show",value:"审核通过"===t.row.submitStatus&&"未登记"===t.row.downStatus,expression:"scope.row.submitStatus==='审核通过' && scope.row.downStatus==='未登记'"}],attrs:{size:"mini",type:"text"},on:{click:function(i){e.handleDengJi(t.$index,t.row)}}},[e._v("登记 ")])]}}])})],1)],1),s("div",{staticClass:"marginTop10 text-right"},[s("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),s("AddVisitorDialog",{attrs:{visible:e.dialogVisible},on:{confirmadddialog:e.handleConfirmDialog,cancleadddialog:e.handleCancleDialog}}),s("div",{staticClass:"common_lookInfoDialog"},[s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"edit-form",attrs:{title:"我的访客信息",visible:e.visitorInfomation,"close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(t){e.visitorInfomation=t}}},[s("el-form",{ref:"editForm",attrs:{"v-model":e.editForm,"label-width":"110px",inline:!0}},[s("div",{},[s("el-form-item",{attrs:{label:"到访日期"}},[s("el-input",{attrs:{disabled:""},model:{value:e.editForm.sanyBussVisitor.planBeginTime,callback:function(t){e.$set(e.editForm.sanyBussVisitor,"planBeginTime",t)},expression:"editForm.sanyBussVisitor.planBeginTime"}})],1),s("el-form-item",{attrs:{label:"拜访时间"}},[s("el-input",{attrs:{disabled:""},model:{value:e.editForm.sanyBussVisitor.visitingTime,callback:function(t){e.$set(e.editForm.sanyBussVisitor,"visitingTime",t)},expression:"editForm.sanyBussVisitor.visitingTime"}})],1),s("el-form-item",{attrs:{label:"来访人员数量"}},[s("el-input",{attrs:{disabled:""},model:{value:e.editForm.sanyBussVisitor.vistorNum,callback:function(t){e.$set(e.editForm.sanyBussVisitor,"vistorNum",t)},expression:"editForm.sanyBussVisitor.vistorNum"}})],1),s("el-form-item",{attrs:{label:"是否驾车"}},[s("el-input",{attrs:{disabled:""},model:{value:e.editForm.sanyBussVisitor.isCar,callback:function(t){e.$set(e.editForm.sanyBussVisitor,"isCar",t)},expression:"editForm.sanyBussVisitor.isCar"}})],1),s("el-form-item",{attrs:{label:"驾车数量"}},[s("el-input",{attrs:{disabled:""},model:{value:e.editForm.sanyBussVisitor.carNum,callback:function(t){e.$set(e.editForm.sanyBussVisitor,"carNum",t)},expression:"editForm.sanyBussVisitor.carNum"}})],1),s("el-form-item",{attrs:{label:"访客类型"}},[s("el-input",{attrs:{disabled:""},model:{value:e.editFormFirstIsVip,callback:function(t){e.editFormFirstIsVip=t},expression:"editFormFirstIsVip"}})],1),s("br"),s("el-form-item",{attrs:{label:"拜访原因"}},[s("el-input",{staticStyle:{width:"795px"},attrs:{disabled:"",type:"textarea",rows:3},model:{value:e.editForm.sanyBussVisitor.reason,callback:function(t){e.$set(e.editForm.sanyBussVisitor,"reason",t)},expression:"editForm.sanyBussVisitor.reason"}})],1)],1)]),s("div",{staticClass:"common-table"},[s("el-table",{attrs:{"header-row-class-name":"table-header",border:"",data:e.editForm.sanyBussVisitorDetailsList}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),s("el-table-column",{attrs:{prop:"visitorName",label:"拜访人姓名",width:"110"}}),s("el-table-column",{attrs:{prop:"phone",label:"电话号码",width:"115"}}),s("el-table-column",{attrs:{prop:"visitorId",label:"身份证号",width:"170"}}),s("el-table-column",{attrs:{prop:"carNo",label:"车牌号码",width:"110"}}),s("el-table-column",{attrs:{prop:"isSub",label:"登记状态",width:"80"}}),s("el-table-column",{attrs:{label:"上传",width:"143"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-upload",{staticClass:"upload-demo",attrs:{action:"string",accept:"image/jpeg,image/png,image/jpg","list-type":"picture","show-file-list":!1,"before-upload":e.onBeforeUploadImage,"http-request":e.UploadImage}},[s("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isShowDownSubBtn,expression:"isShowDownSubBtn"}],staticClass:"btnIsBlue",attrs:{size:"mini",type:"primary"},on:{click:function(i){e.handleRepeatUploadPhoto(t.$index,t.row)}}},[e._v("重新上传 ")]),e._v(" \n                "),s("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.isShowDownSubBtn,expression:"isShowDownSubBtn"}],attrs:{content:"只能上传jpg/png文件，且大小不超过2M",placement:"top"}},[s("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:i("3099"),alt:""}})])],1)]}}])}),s("el-table-column",{attrs:{prop:"imgUrl",label:"图片名称",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.row.imgUrl,expression:"scope.row.imgUrl"}],attrs:{size:"mini",type:"text"},on:{click:function(i){e.checkPicture(t.$index,t.row)}}},[e._v("查看图片")])]}}])}),s("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(i){e.handleSendMessagesInformation(t.$index,t.row)}}},[e._v("发送信息")])]}}])})],1)],1),s("br"),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})],1)],1),s("div",{staticClass:"checkPictureInformation"},[s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"edit-form",attrs:{title:"图片信息",visible:e.checkPictureInformationVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.checkPictureInformationVisible=t}}},[s("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center",overflow:"hidden"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.currentImg,alt:""}})])])],1)],1)},a=[],n=(i("96cf"),i("3b8d")),r=i("47d5"),o=i("365c"),l=i("a7fa");var c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"我的访客信息","close-on-click-modal":!1,visible:e.dialogVisibles,width:"1120px"},on:{"update:visible":function(t){e.dialogVisibles=t},close:e.handleDialogClose}},[s("div",{staticClass:"addVisitorDialog"},[s("el-form",{ref:"editDateForm",staticClass:"marginTop20 common-form-inline addVisitorDialog_form",attrs:{model:e.formInline.sanyBussVisitor,rules:e.rules,inline:!0,size:"medium","label-width":"100px"}},[s("el-form-item",{attrs:{label:"到访日期",prop:"planBeginTime"}},[s("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","default-value":new Date,"picker-options":e.pickerOptionsStart,placeholder:"选择到访日期"},on:{change:e.selectDateValueControl},model:{value:e.formInline.sanyBussVisitor.planBeginTime,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"planBeginTime",t)},expression:"formInline.sanyBussVisitor.planBeginTime"}})],1),s("el-form-item",{attrs:{label:"拜访时间",prop:"visitingTime"}},[s("el-select",{attrs:{disabled:e.isSelected,placeholder:"请选择"},model:{value:e.formInline.sanyBussVisitor.visitingTime,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"visitingTime",t)},expression:"formInline.sanyBussVisitor.visitingTime"}},e._l(e.visitingTimeOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"来访人数量"}},[s("el-input-number",{attrs:{controls:!1,disabled:"",min:e.formInline.sanyBussVisitor.vistorNum},on:{change:e.handleInputPersonNum,blur:function(t){e.blurVisitorNum()}},model:{value:e.formInline.sanyBussVisitor.vistorNum,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"vistorNum",t)},expression:"formInline.sanyBussVisitor.vistorNum"}})],1),s("el-form-item",{attrs:{label:"是否驾车"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:e.isCarNum},model:{value:e.formInline.sanyBussVisitor.isCar,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"isCar",t)},expression:"formInline.sanyBussVisitor.isCar"}},e._l(e.isDriveCarOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"访客类型"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:e.isVipChange},model:{value:e.isVip,callback:function(t){e.isVip=t},expression:"isVip"}},e._l(e.isVipOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"访客园区"}},[s("el-select",{attrs:{placeholder:"请选择"},on:{change:e.visitorParkChange},model:{value:e.visitorPark,callback:function(t){e.visitorPark=t},expression:"visitorPark"}},e._l(e.visitorParkOptions,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),s("el-form-item",{attrs:{label:"拜访原因"}},[s("el-input",{staticStyle:{width:"905px"},attrs:{type:"textarea",rows:4,placeholder:"请输入原因"},model:{value:e.formInline.sanyBussVisitor.reason,callback:function(t){e.$set(e.formInline.sanyBussVisitor,"reason",t)},expression:"formInline.sanyBussVisitor.reason"}})],1),s("div",[s("el-form-item",[s("el-button",{staticClass:"btnIsBlue",staticStyle:{width:"100px"},attrs:{type:"primary"},on:{click:e.handleInputPersonNum}},[e._v("新增")]),e._v("   \r\n            "),s("el-tooltip",{attrs:{content:"点击新增，增加来访人员列表数量",placement:"top"}},[s("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:i("381d"),alt:""}})])],1)],1)],1),s("div",{staticClass:"addVisitorDialog_table addVisitorDialog_personTable"},[s("table",[s("thead",[s("tr",[s("th",[e._v("序号")]),s("th",[e._v("拜访人姓名")]),s("th",[e._v("性别")]),s("th",[e._v("电话号码")]),s("th",[e._v("身份证号")]),s("th",[e._v("车牌号")]),s("th",[e._v(" 上传   \r\n\r\n            ")]),s("th",[e._v("查看图片")]),s("th",[e._v("操作")])])]),s("tbody",e._l(e.formInline.sanyBussVisitorDetailsList,function(t,a){return s("tr",{key:a},[s("td",{domProps:{textContent:e._s(a+1)}},[e._v("1")]),s("td",{staticStyle:{position:"relative"}},[s("el-input",{class:{regIsNull:!(""!==t.visitorName||!e.isShowUserName)},attrs:{placeholder:"请输入姓名"},on:{focus:function(i){e.focusUserName(t.visitorName,a)},blur:function(i){e.blurUserName(t.visitorName,a)},change:function(i){e.inputChangeName(t.visitorName)}},model:{value:t.visitorName,callback:function(i){e.$set(t,"visitorName",i)},expression:"item.visitorName"}}),s("span",{staticStyle:{position:"absolute",top:"22px",left:"0px",color:"#f56c6c"}},[e._v("*")]),e.isShowUserName?s("div",{directives:[{name:"show",rawName:"v-show",value:""===t.visitorName,expression:"item.visitorName===''?true:false"}],staticStyle:{color:"#F56C6C","text-align":"left",position:"absolute",top:"60px",left:"8px"}},[e._v("请输入姓名")]):e._e()],1),s("td",{staticStyle:{position:"relative"}},[s("el-radio",{attrs:{label:"1"},model:{value:t.gender,callback:function(i){e.$set(t,"gender",i)},expression:"item.gender"}},[e._v("男")]),s("el-radio",{attrs:{label:"2"},model:{value:t.gender,callback:function(i){e.$set(t,"gender",i)},expression:"item.gender"}},[e._v("女")]),s("span",{staticStyle:{position:"absolute",top:"22px",left:"0px",color:"#f56c6c"}},[e._v("*")]),e.isShowGender?s("div",{directives:[{name:"show",rawName:"v-show",value:""===t.gender,expression:"item.gender===''?true:false"}],staticStyle:{color:"#F56C6C","text-align":"left",position:"absolute",top:"60px",left:"8px"}},[e._v("请选择性别")]):e._e()],1),s("td",{staticStyle:{position:"relative"}},[s("el-input",{class:{regIsNull:!(""!==t.phone||!e.isShowPhone)},attrs:{placeholder:"请输入电话"},on:{blur:function(i){e.blurPhone(t.phone)},change:function(i){e.regTel(t.phone)}},model:{value:t.phone,callback:function(i){e.$set(t,"phone",i)},expression:"item.phone"}}),s("span",{staticStyle:{position:"absolute",top:"22px",left:"0px",color:"#f56c6c"}},[e._v("*")]),e.isShowPhone?s("div",{directives:[{name:"show",rawName:"v-show",value:""===t.phone,expression:"item.phone===''? true : false"}],staticStyle:{color:"#F56C6C","text-align":"left",position:"absolute",top:"60px",left:"8px"}},[e._v("请输入电话")]):e._e()],1),s("td",{staticStyle:{position:"relative"}},[s("el-input",{attrs:{placeholder:"请输入身份证号"},on:{blur:function(i){e.blurIdCard(t.visitorId)},change:function(i){e.regID(t.visitorId,a)}},model:{value:t.visitorId,callback:function(i){e.$set(t,"visitorId",i)},expression:"item.visitorId"}})],1),s("td",{staticStyle:{position:"relative"}},[s("el-input",{class:{regIsNull:e.isHavecarNo},attrs:{disabled:"0"===e.formInline.sanyBussVisitor.isCar,placeholder:"请输入车牌号"},on:{blur:e.blurCarNo,change:function(i){e.regCarNo(t.carNo,a)}},model:{value:t.carNo,callback:function(i){e.$set(t,"carNo",i)},expression:"item.carNo"}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.isHavecarNo,expression:"isHavecarNo"}],staticStyle:{color:"#F56C6C","text-align":"left",position:"absolute",top:"60px",left:"8px"}},[e._v("请输入车牌号")])],1),s("td",{staticStyle:{display:"flex","align-items":"center","justify-content":"center","margin-top":"7px"}},[s("div",{on:{click:function(t){e.handleClickUpload(a)}}},[s("el-upload",{ref:e.getUpload(a),refInFor:!0,staticClass:"upload-demo",attrs:{id:e.getUpload(a),action:"string",accept:"image/jpeg,image/png,image/jpg","list-type":"picture","show-file-list":!1,"before-upload":e.onBeforeUploadImage,"http-request":e.UploadImage,"file-list":t.fileList}},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.imgUrl,expression:"!item.imgUrl"}]},[s("el-button",{staticClass:"btnIsBlue",attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v("  \r\n\r\n                      ")],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"item.imgUrl"}]},[s("el-button",{staticClass:"btnIsBlue",attrs:{size:"small",type:"primary"}},[e._v("重新上传")]),e._v("  \r\n                        ")],1)])],1),s("el-tooltip",{attrs:{content:"只能上传jpg/png文件，且大小不超过2M",placement:"top"}},[s("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:i("3099"),alt:""}})])],1),s("td",[s("el-button",{directives:[{name:"show",rawName:"v-show",value:t.imgUrl,expression:"item.imgUrl"}],attrs:{size:"mini",type:"text"},on:{click:function(i){e.handleLookImg(t,a)}}},[e._v("查看图片")])],1),s("td",[s("el-button",{staticStyle:{width:"80px",height:"32px"},attrs:{type:"danger",size:"mini",disabled:e.deleteDisabled},on:{click:function(i){e.deleteSingleLine(t,a)}}},[e._v("删除")])],1)])}),0)])])],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.handleDialogCancle}},[e._v("取 消")]),s("el-button",{staticClass:"btnIsBlue",attrs:{type:"primary"},on:{click:e.handleDialogConfirm}},[e._v("确 定")])],1)]),s("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],staticClass:"edit-form",attrs:{title:"图片信息",visible:e.dialogVisibleImg,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisibleImg=t}}},[s("div",{staticClass:"inputText",staticStyle:{display:"flex","justify-content":"center","align-items":"center",overflow:"hidden"}},[s("img",{staticStyle:{width:"100%"},attrs:{src:e.lookCurrentImgUrl,alt:""}})]),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{nativeOn:{click:function(t){e.dialogVisibleImg=!1}}},[e._v("取消")])],1)])],1)},u=[],m=(i("2fdb"),i("6762"),i("ac6a"),i("c5f6"),i("7514"),i("0a0d")),d=i.n(m),h=(i("cadf"),i("551c"),i("097d"),i("9a38")),p={name:"AddVisitorDialog",props:["visible"],watch:{visible:function(e){this.dialogVisibles=e}},data:function(){var e=this;return{isSelected:!1,deleteDisabled:!1,regIsNull:!1,regIsIDCard:!1,regIsName:!1,isShowUserName:!1,isShowPhone:!1,isShowIDCard:!1,isShowGender:!1,isHavecarNo:!1,currentUploadIndex:0,dialogVisibleImg:!1,dialogVisibles:this.visible,isTelephonetrue:!1,isIDCardtrue:!1,isCar:"0",isDriveCarOptions:[{value:"1",label:"是"},{value:"0",label:"否"}],isVip:"一般访客",isVipOptions:[{label:"Vip",value:"1"},{label:"一般访客",value:"0"}],visitorPark:"回龙观园区",visitorParkOptions:[{label:"回龙观园区",value:"1"}],visitingTimeOptions:[{label:"上午",value:"01"},{label:"下午",value:"02"},{label:"全天",value:"03"}],pickerOptionsStart:{disabledDate:function(e){return e.getTime()<d()()-864e5}},pickerOptionsEnd:{disabledDate:function(t){return t.getTime()<new Date(e.formInline.sanyBussVisitor.planBeginTime).getTime()||t.getTime()>new Date(e.formInline.sanyBussVisitor.planBeginTime).getTime()}},rules:{planBeginTime:[{required:!0,message:"请选择开始时间",trigger:"blur"}]},formInline:{sanyBussVisitor:{planBeginTime:"",visitingTime:"03",vistorNum:1,isCar:"0",isVip:0,carNum:0,reason:""},sanyBussVisitorDetailsList:[{visitorName:"",gender:"1",phone:"",visitorId:"",imgUrl:"",carNo:"",countCard:""}],sanyBussVisitorCarList:[]},lookCurrentImgUrl:""}},mounted:function(){},methods:{handleClickUpload:function(e){this.currentUploadIndex=e},getUpload:function(e){return"uploadPerson".concat(e)},onBeforeUploadImage:function(e){var t="image/jpeg"===e.type||"image/jpg",i=e.size/1024/1024<2;return t||this.$message.error("上传文件只能是图片格式!"),i||this.$message.error("上传文件大小不能超过 2MB!"),t&&i},UploadImage:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i,s,a,n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i="uploadPerson".concat(this.currentUploadIndex),s=new FormData(document.getElementById("".concat(i))),s.append("file",t.file),e.next=5,Object(r["f"])(s);case 5:a=e.sent,a&&200===a.status&&(this.$message({type:"success",message:"上传成功"}),n=a.data,n.code,o=n.data,n.msg,this.formInline.sanyBussVisitorDetailsList[this.currentUploadIndex].imgUrl=o);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleLookImg:function(e,t){this.dialogVisibleImg=!0,this.currentUploadIndex=t;var i=Object(l["a"])().isInnerIp;console.log("isInnerIp:",i),this.lookCurrentImgUrl=i?"http://10.19.8.21:8181".concat(this.formInline.sanyBussVisitorDetailsList[this.currentUploadIndex].imgUrl.slice(22)):"http://222.240.233.67:8181".concat(this.formInline.sanyBussVisitorDetailsList[this.currentUploadIndex].imgUrl.slice(22))},handleInputPersonNum:function(){var e=this.formInline.sanyBussVisitorDetailsList.length;this.formInline.sanyBussVisitor.vistorNum=e+1;var t={visitorName:"",phone:"",gender:"1",visitorId:"",imgUrl:"",carNo:""};this.formInline.sanyBussVisitorDetailsList.splice(e,0,t),this.formInline.sanyBussVisitorDetailsList.length<=1?this.deleteDisabled=!0:this.deleteDisabled=!1},blurVisitorNum:function(){this.formInline.sanyBussVisitor.vistorNum=this.formInline.sanyBussVisitorDetailsList.length},isVipChange:function(e){var t={};t=this.isVipOptions.find(function(t){return t.value===e}),this.isVip=t.label,this.formInline.sanyBussVisitor.isVip=Number(t.value),console.log("this.formInline.sanyBussVisitor.isVip:",this.formInline.sanyBussVisitor.isVip)},visitorParkChange:function(e){var t={};t=this.visitorParkOptions.find(function(t){return t.value===e}),this.visitorPark=t.label},isCarNum:function(){"0"===this.formInline.sanyBussVisitor.isCar?(this.formInline.sanyBussVisitor.carNum=0,this.formInline.sanyBussVisitorDetailsList.forEach(function(e){e.carNo=""})):"1"===this.formInline.sanyBussVisitor.isCar&&(this.formInline.sanyBussVisitor.carNum=1),console.log(this.formInline.sanyBussVisitor.carNum)},handleInputCarNum:function(){var e=this.formInline.sanyBussVisitor;e.carNum,e.vistorNum},handleDialogConfirm:function(){var e=this;this.$refs.editDateForm.validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(i){var s,a,n,r,o,l,c,u,m,d,h,p;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i){t.next=2;break}return t.abrupt("return");case 2:s=e.formInline.sanyBussVisitorDetailsList,a=[],s.forEach(function(e){""!==e.carNo&&a.push(e.carNo)}),n=0;case 6:if(!(n<s.length)){t.next=34;break}if(""!==s[n].visitorName){t.next=13;break}return e.regIsName=!0,e.isShowUserName=!0,t.abrupt("return");case 13:if(""!==s[n].gender){t.next=18;break}return e.isShowGender=!0,t.abrupt("return");case 18:if(""!==s[n].phone){t.next=24;break}return e.regIsNull=!0,e.isShowPhone=!0,t.abrupt("return");case 24:if(0!==a.length||"1"!==e.formInline.sanyBussVisitor.isCar){t.next=30;break}return e.isHavecarNo=!0,e.$message({type:"error",message:"请输入车牌号"}),t.abrupt("return");case 30:e.isHavecarNo=!1;case 31:n++,t.next=6;break;case 34:if(!e.isTelephonetrue){t.next=37;break}return e.$message({type:"error",message:"手机号码输入不正确"}),t.abrupt("return");case 37:if(!e.isIDCardtrue){t.next=40;break}return e.$message({type:"error",message:"身份证号码输入不正确"}),t.abrupt("return");case 40:if(!e.checkCarCardBoolean){t.next=43;break}return e.$message({type:"error",message:"车牌号码输入不正确"}),t.abrupt("return");case 43:"下午"===e.formInline.sanyBussVisitor.visitingTime?e.formInline.sanyBussVisitor.visitingTime="02":"全天"===e.formInline.sanyBussVisitor.visitingTime&&(e.formInline.sanyBussVisitor.visitingTime="03"),e.dialogVisibles=!1,e.$emit("dialogvisible",e.dialogVisibles),r=e.formInline.sanyBussVisitor,o=r.planBeginTime,l=r.visitingTime,c=r.vistorNum,u=r.isCar,m=r.isVip,d=r.carNum,h=r.reason,p=e.formInline.sanyBussVisitorDetailsList,console.log("this.sanyBussVisitor:",e.formInline.sanyBussVisitor),console.log("this.sanyBussVisitorDetailsList:",e.formInline.sanyBussVisitorDetailsList),e.formInline.source=1,e.addApplyRequestData(o,l,c,u,m,d,h,p,e.formInline.source);case 52:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}())},addApplyRequestData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i,s,a,n,o,l,c,u){var m,d,h;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["a"])(t,i,s,a,n,o,l,c,u);case 2:if(m=e.sent,m&&200===m.data.code){e.next=6;break}return this.$message({type:"error",message:m.data.msg}),e.abrupt("return");case 6:d=m.data.data.messageDto,h=[],d.forEach(function(e){var t={};t.qrCode=e.qrCode,t.telephone=e.telephone,t.uid=e.uid,t.verifCode=e.verifCode,h.push(t)}),console.log("messageArr:",h),console.log("carNum：",o),0===o&&this.addVisitorSuccess(h),this.formInline.sanyBussVisitor={vistorNum:1,isCar:"0",carNum:0,isVip:0,reason:"",planBeginTime:"",visitingTime:"03"},this.formInline.sanyBussVisitorDetailsList=[{visitorName:"",phone:"",visitorId:"",gender:"1",imgUrl:"",carNo:""}],this.formInline.sanyBussVisitorCarList=[],this.dialogVisibles=!1,this.$emit("confirmadddialog",this.dialogVisibles);case 17:case"end":return e.stop()}},e,this)}));function t(t,i,s,a,n,r,o,l,c){return e.apply(this,arguments)}return t}(),addVisitorSuccess:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["t"])(t);case 2:i=e.sent,i&&i.data.code;case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleDialogCancle:function(){this.dialogVisibles=!1,this.formInline.sanyBussVisitor={vistorNum:1,isCar:"0",carNum:0,isVip:0,reason:"",planBeginTime:"",visitingTime:"03"},this.formInline.sanyBussVisitorDetailsList=[{visitorName:"",phone:"",visitorId:"",gender:"1",imgUrl:"",carNo:""}],this.formInline.sanyBussVisitorCarList=[],this.dialogVisibles=!1,this.$emit("cancleadddialog",this.dialogVisibles)},handleDialogClose:function(){this.dialogVisibles=!1,this.formInline.sanyBussVisitor={vistorNum:1,isCar:"0",carNum:0,isVip:0,reason:"",planBeginTime:"",visitingTime:"03"},this.formInline.sanyBussVisitorDetailsList=[{visitorName:"",phone:"",visitorId:"",gender:"1",imgUrl:"",carNo:""}],this.formInline.sanyBussVisitorCarList=[],this.dialogVisibles=!1,this.$emit("confirmadddialog",this.dialogVisibles)},regTel:function(e){this.isTelephonetrue=Object(h["c"])(e,this),console.log("isTelephone:",this.isTelephonetrue),this.regIsNull=""===e},regID:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){var s,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isIDCardtrue=Object(h["b"])(t,this),s=[],this.formInline.sanyBussVisitorDetailsList.forEach(function(e){s.push(e.visitorId)}),s.splice(i,1),a=s.includes(t),!0===a&&(this.formInline.sanyBussVisitorDetailsList[i].visitorId="",this.$message({type:"error",message:"输入的身份证重复，请重新输入"})),e.next=8,Object(o["kb"])(t);case 8:n=e.sent,n&&200!==n.data.code&&(this.$message({type:"error",message:n.data.msg}),this.formInline.sanyBussVisitorDetailsList[i].visitorId=""),this.regIsIDCard=""===t;case 11:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}(),inputChangeName:function(e){this.regIsName=""===e},blurUserName:function(e,t){console.log("val:",e),console.log("index:",t),this.regIsName=""===e,this.isShowUserName=""===e},blurPhone:function(e){this.regIsNull=""===e,this.isShowPhone=""===e},blurIdCard:function(e){this.regIsIDCard=""===e,this.isShowIDCard=""===e},blurCarNo:function(e){this.isShowCarNo=""===e},regCarNo:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){var s,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.checkCarCardBoolean=Object(h["a"])(t,this),s=[],this.formInline.sanyBussVisitorDetailsList.forEach(function(e){s.push(e.carNo)}),s.splice(i,1),a=s.includes(t),!0===a&&(this.formInline.sanyBussVisitorDetailsList[i].carNo="",this.$message({type:"error",message:"输入的身份证重复，请重新输入"})),e.next=8,Object(o["v"])(t);case 8:if(n=e.sent,200===n.data.code){e.next=13;break}return this.formInline.sanyBussVisitorDetailsList[i].carNo="",this.$message({type:"error",message:n.data.msg}),e.abrupt("return");case 13:""!==t&&(this.isHavecarNo=!1);case 14:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}(),focusUserName:function(e,t){console.log("val0000000000000:",e)},deleteSingleLine:function(e,t){var i=this;if(this.formInline.sanyBussVisitorDetailsList.length<=1)return this.deleteDisabled=!0,void this.$message({message:"删除失败,默认保留一行"});this.$confirm("删除该条数据文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.$message({type:"success",message:"删除成功!"}),i.formInline.sanyBussVisitorDetailsList.splice(t,1),i.formInline.sanyBussVisitor.vistorNum=i.formInline.sanyBussVisitorDetailsList.length}).catch(function(){i.$message({type:"info",message:"已取消删除"})})},selectDateValueControl:function(e){var t=new Date(new Date((new Date).toDateString()).getTime()+432e5).getTime(),i=new Date(new Date((new Date).toDateString()).getTime()+288e5).getTime(),s=new Date(e).getTime(),a=d()();a>t&&(s===i?(this.formInline.sanyBussVisitor.visitingTime="下午",this.isSelected=!0):(this.formInline.sanyBussVisitor.visitingTime="全天",this.isSelected=!1))}}},g=p,f=(i("fd4d"),i("2877")),v=Object(f["a"])(g,c,u,!1,null,"d4b782b0",null);v.options.__file="addVisitorDialog.vue";var b=v.exports,y=(i("d055"),i("2f62"),{name:"Template",components:{AddVisitorDialog:b},data:function(){return{tableData:[],loadingSwitch:!1,loadingStatus:!0,noDataStatus:!1,editFormFirstIsVip:"",qrCode:"",reImageId:"",currentPage:1,pageSize:10,totalNum:0,visitorName:"",editForm:{sanyBussVisitor:{},sanyBussVisitorDetailsList:[{imgUrl:""}],sanyBussVisitorCarList:[]},dialogVisible:!1,visitorInfomation:!1,checkPictureInformationVisible:!1,currentImg:"",multipleSelection:[],currentUploadIndex:"",isShowDownSubBtn:!1}},mounted:function(){this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName)},watch:{tableData:function(){this.loadingSwitch=!1}},methods:{getAllVisitorData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i,s){var a,n,o,l,c,u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return""===s||(a=s),e.next=3,Object(r["h"])(t,i,a);case 3:if(n=e.sent,n&&n.data&&"200"!==!n.data.code){e.next=6;break}return e.abrupt("return");case 6:o=n.data.data,l=o.list,c=o.total,n.data.data.list,this.totalNum=c,this.tableData=l.map(function(e,t){var i=e.visitorStatus;"01"===i?i="待访问":"02"===i?i="访问中":"03"===i?i="访问结束":"04"===i&&(i="无效访问");var s=e.submitStatus;"01"===s?s="编辑中":"02"===s?s="审核通过":"03"===s&&(s="审核失败");var a=e.auditingType;"01"===a?a="个人审核通过":"02"===a&&(a="门岗审核通过");var n=e.recordType;"01"===n?n="被访人录入":"02"===n?n="访客机录入":"03"===n&&(n="门岗录入");var r=e.isSub;"1"===r?r="已登记":"2"===r&&(r="未登记");var o=e.isCar;"1"===o?o="是":"0"===o&&(o="否");var l=e.isVip;1===l?l="Vip":0===l&&(l="一般访客");var c=e.visitingTime;"01"===c?c="上午":"02"===c?c="下午":"03"===c&&(c="全天");var m=e.auditingCode?e.auditingCode:"",d=e.auditingName?e.auditingName:"",h="";return h=m?m+"/"+d:d,u.documentNo=e.documentNo,{id:e.id,planBeginTime:e.planBeginTime,vistorNum:e.vistorNum,isCar:o,isVip:l,carNum:e.carNum,visitorStatus:i,submitStatus:s,auditingType:a,recordType:n,visitingTime:c,operatorNumAndName:e.operaterCode,reviewNumAndName:h,reviewTime:e.auditingTime,downStatus:r,qrCode:e.qrCode,phone:e.phone,documentNo:e.documentNo,userName:e.userName,number:(u.currentPage-1)*u.pageSize+(t+1)}}),this.loadingStatus=!1,0===this.totalNum?this.noDataStatus=!0:this.noDataStatus=!1;case 12:case"end":return e.stop()}},e,this)}));function t(t,i,s){return e.apply(this,arguments)}return t}(),handleSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName),this.loadingSwitch=!0},handleCurrentChange:function(e){this.currentPage=e,this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName),this.loadingSwitch=!0},handleSearchByName:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.currentPage=1,this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName),this.loadingSwitch=!0;case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleLookInfo:function(e,t){console.log("row:",t),this.visitorInfomation=!0,this.qrCode=t.qrCode,"已登记"===t.downStatus?this.isShowDownSubBtn=!1:this.isShowDownSubBtn=!0,this.getVisitorDetailsData(t.id)},getVisitorDetailsData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["i"])(t);case 2:if(i=e.sent,i&&200===i.data.code){e.next=6;break}return this.$message({type:"error",message:i.data.msg}),e.abrupt("return");case 6:this.editForm=i.data.data,this.editForm.sanyBussVisitor.isCar="1"===this.editForm.sanyBussVisitor.isCar?"是":"否",1===this.editForm.sanyBussVisitor.isVip?this.editForm.sanyBussVisitor.isVip="Vip":0===this.editForm.sanyBussVisitor.isVip&&(this.editForm.sanyBussVisitor.isVip="一般访客"),"01"===this.editForm.sanyBussVisitor.visitingTime?this.editForm.sanyBussVisitor.visitingTime="上午":"02"===this.editForm.sanyBussVisitor.visitingTime?this.editForm.sanyBussVisitor.visitingTime="下午":"03"===this.editForm.sanyBussVisitor.visitingTime&&(this.editForm.sanyBussVisitor.visitingTime="全天"),this.editForm.sanyBussVisitorDetailsList.map(function(e){return"1"===e.isSub?e.isSub="已登记":"2"===e.isSub&&(e.isSub="未登记"),1===e.isVip?s.editFormFirstIsVip="Vip":0===e.isVip&&(s.editFormFirstIsVip="一般访客"),{isSub:e.isSub}});case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleConfirmVisit:function(e,t){var i=this;this.$confirm("确认访问?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.confirmVisitData(t.id,1)}).catch(function(){})},confirmVisitData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){var s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["d"])(t,i);case 2:s=e.sent,200===s.data.code?this.$message({type:"success",message:s.data.data}):this.$message({type:"success",message:s.data.msg});case 4:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}(),InvalidCancelManualEndData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,i){var s,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=i,e.next=3,s(t);case 3:a=e.sent,200===a.data.code?(this.$message({type:"success",message:a.data.data}),this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName)):this.$message({type:"success",message:a.data.msg});case 5:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}(),handleInvalidVisit:function(e,t){var i=this;console.log("无效访问:",t),this.$confirm("确定是无效访问?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.InvalidCancelManualEndData(t.id,r["k"])}).catch(function(){})},handleInvalid:function(e,t){var i=this;console.log(e,t),this.$confirm("确定作废?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.InvalidCancelManualEndData(t.id,r["c"])}).catch(function(){})},handleDengJi:function(e,t){var i=this;this.$confirm("确定登记?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.id;i.getRegister(e)}).catch(function(){i.$message({type:"info",message:"已取消登记"})})},getRegister:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["j"])(t);case 2:i=e.sent,i&&200===i.data.code?(this.$message({type:"success",message:i.data.data}),this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName)):this.$message({type:"error",message:i.data.msg});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleEnd:function(e,t){var i=this;console.log(e,t),this.$confirm("确定手动结束?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.InvalidCancelManualEndData(t.id,r["l"])}).catch(function(){})},handleSelectionChange:function(e){this.multipleSelection=e,console.log("multipleSelection:",this.multipleSelection)},handleDownSubPhoto:function(e,t){var i=this;this.$confirm("确定下发?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=t.id;i.subSendImage(e)}).catch(function(){i.$message({type:"info",message:"已取消下发照片"})})},subSendImage:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["Z"])(t);case 2:i=e.sent,i&&i.data&&200===i.data.code?(this.$message({type:"success",message:i.data.data}),this.currentPage=1,this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName)):this.$message({type:"error",message:i.data.data});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleSendMessages:function(){var e=this;0!==this.multipleSelection.length?this.$confirm("确定发送?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.multipleSelection,i=[],s=[];console.log("multipleSelection:",t);for(var a=0;a<t.length;a++){var n={};n.uid=t[a].id,n.qrCode=t[a].qrCode,n.verifCode=t[a].documentNo,i.push(n),s.push(t[a].qrCode)}e.sendMessageAsync(i)}).catch(function(){e.$message({type:"info",message:"已取消发送"})}):this.$message({type:"error",message:"请选择发送短信对象"})},handleSendMessagesInformation:function(e,t){var i=this;console.log("row0000000:",t),this.$confirm("确定发送?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e=[],s={};s.uid=t.id,s.qrCode=t.qrCode,s.verifCode=t.verifCode,e.push(s),i.sendMessageSingle(e)}).catch(function(){i.$message({type:"info",message:"已取消发送"})})},sendMessageSingle:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["X"])(t);case 2:i=e.sent,i&&i.data&&200===i.data.code?(this.$message({type:"success",message:"短信发送成功"}),this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName)):this.$message({type:"error",message:i.data.msg});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),sendMessageAsync:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["Y"])(t);case 2:i=e.sent,i&&i.data&&200===i.data.code?(this.$message({type:"success",message:"短信发送成功"}),this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName)):this.$message({type:"error",message:i.data.msg});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleAddVisitor:function(){this.dialogVisible=!0},handleConfirmDialog:function(e){this.dialogVisible=e,this.currentPage=1,this.getAllVisitorData(this.currentPage,this.pageSize,this.visitorName)},handleCancleDialog:function(e){this.dialogVisible=e},checkPicture:function(e,t){this.checkPictureInformationVisible=!0,this.currentUploadIndex=e;var i=Object(l["a"])().isInnerIp;console.log("isInnerIp:",i),this.currentImg=i?"http://10.19.8.21:8181".concat(this.editForm.sanyBussVisitorDetailsList[this.currentUploadIndex].imgUrl.slice(22)):"http://222.240.233.67:8181".concat(this.editForm.sanyBussVisitorDetailsList[this.currentUploadIndex].imgUrl.slice(22)),console.log("查看图片row",t)},handleRepeatUploadPhoto:function(e,t){this.currentUploadIndex=e,this.reImageId=t.id},onBeforeUploadImage:function(e){var t="image/jpeg"===e.type||"image/jpg",i=e.size/1024/1024<2;return t||this.$message.error("上传文件只能是图片格式!"),i||this.$message.error("上传文件大小不能超过 1MB!"),t&&i},UploadImage:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var i,s,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i="uploadPerson".concat(this.currentUploadIndex),s=new FormData(document.getElementById("".concat(i))),s.append("file",t.file),console.log("param:",t),e.next=6,Object(o["R"])(s,this.reImageId);case 6:a=e.sent,a&&200===a.status&&(this.$message({type:"success",message:"上传成功"}),n=a.data,n.code,r=n.data,n.msg,console.log("imgUrl:",r),this.editForm.sanyBussVisitorDetailsList[this.currentUploadIndex].imgUrl=r);case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleImageDownSub:function(e){this.visitorInfomation=!1;var t=e.sanyBussVisitor.id;this.subSendImage(t)}}}),I=y,w=(i("d2e6"),Object(f["a"])(I,s,a,!1,null,"fcd0c508",null));w.options.__file="myVisitor.vue";t["default"]=w.exports},e829:function(e,t,i){i("2f37"),e.exports=i("584a").Date.now},fd4d:function(e,t,i){"use strict";var s=i("fdaf"),a=i.n(s);a.a},fdaf:function(e,t,i){}}]);
//# sourceMappingURL=chunk-5448c794.1bd43bf6.js.map